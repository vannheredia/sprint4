if (self.CavalryLogger) { CavalryLogger.start_js(["H\/9Of"]); }

__d("JSLoggerImpl",["Arbiter","AsyncRequest","Banzai","BanzaiODS","Env","ErrorUtils","JSLogger","JSLoggerConfig","SystemEvents","emptyFunction","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i=b("BanzaiODS").create(),j=(a=b("JSLogger"))._,k,l="/ajax/chat/jslogger.php",m=a.create("jslogger"),n=-1,o=null,p={enabled_categories:null,categories:null,send_min:7500,send_max:6e4};function q(a){return b("JSLoggerConfig")[a]||p[a]}function r(a){var b=q("enabled_categories")||{};a=a in b?b[a]:b.__default;return a}function s(a,b,c){}function t(a){if(console&&console[a.type]&&o&&o.test(a.cat)){var b=/(\d\d:\d\d:\d\d)/.test(new Date(a.date))&&RegExp.$1;b=b+" "+a.cat+":"+a.event;a.data?console[a.type](b,JSON.parse(a.data)):console[a.type](b)}}function u(a){var c={page_id:j.pageId,env_start:(g||(g=b("Env"))).start,now:Date.now()};a?(b("Arbiter").inform(b("JSLogger").DUMP_EVENT,a),c.dumpData=a,c.log=b("JSLogger").getEntries()):(c.log=b("JSLogger").getEntries(function(a){return/log|warn|error/.test(a.type)&&r(a.cat)},k),k=j.head,c.counts=j.counts,j.counts={});return c}function v(a,c,d){__p&&__p();var e=u(a);if(!a){var f=!1;for(var g in e.counts)f=f||g!="jslogger";if(!f&&e.log.length<=0)return}if(b("Banzai").isEnabled("jslogger"))delete e.counts,b("Banzai").post("jslogger",e,{delay:0}),i.flush();else{e=JSON.stringify(e);f=new(b("AsyncRequest"))().setURI(l+(a?"?dump=1":"")).setMethod("POST").setData({clientState:e}).setReadOnly(!0).setAllowCrossPageTransition(!0);c&&f.setHandler(c);f.setErrorHandler(d||b("emptyFunction"));f.send()}}function w(){var a=q("send_min"),c=q("send_max");a=a*Math.pow(2,n+1);n>=0&&!j.forwarding&&(m.bump("send_t"+(a<=c?n:"max")),v());n++;a*=.75+Math.random()/2;b("setTimeoutAcrossTransitions")(w,a)}var x=j.logAction;j.logAction=function(a,c,d){s(this.type,this.cat,a);var e=x.apply(this,arguments);b("Banzai").isEnabled("jslogger")&&(this.type=="bump"?i.bumpEntityKey(2966,this.cat,a,c):this.type=="rate"&&i.bumpFraction(2966,this.cat,a,c?d:0,d));if(e){t(e);while(k&&j.head.seq-k.seq>j.MAX_HISTORY)k=k.next,m.bump("dropped_entries")}};Object.assign(a,{setConsoleFilter:function(a){a instanceof RegExp||(a=a?new RegExp(a):null),o=a},replay:function(){for(var a=j.tail;a;a=a.next)t(a)},getDumpJSON:function(a){return u({})},submitDump:function(a,b){v(a||{},function(a){a=a.getPayload();b(a)},function(){b(null)})},dump:function(a){this.submitDump(a,function(a){a?prompt("JSLogger dump now available at:",a):alert("Error while sending JSLogger dump")})}});w();for(var c=j.tail;c;c=c.next)t(c);var y=a.create("sys");(h||(h=b("ErrorUtils"))).addListener(function(a){a.message=="Script error."?(y.bump("xdomain_error"),y.debug("xdomain_error")):y.error("uncaught_exception",a)});b("SystemEvents").subscribe(b("SystemEvents").ONLINE,function(a,b){y.warn(b?"online":"offline")});b("SystemEvents").subscribe(b("SystemEvents").USER,function(a,b){y.warn("user",{user:b})});b("SystemEvents").subscribe(b("SystemEvents").TIME_TRAVEL,function(a,b){y.warn("time_travel",{dt:b})})}),null);