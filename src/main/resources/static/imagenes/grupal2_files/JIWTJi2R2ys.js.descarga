if (self.CavalryLogger) { CavalryLogger.start_js(["8Fz02"]); }

__d("requestManifest",["Deferred","URI","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a){var c=new(b("Deferred"))();a=new(g||(g=b("URI")))(a);new(b("XHRRequest"))(a).setMethod("GET").setResponseType("text").setTransportBuilder(b("getCrossOriginTransport")).setErrorHandler(function(a){c.reject(a)}).setResponseHandler(Object.assign(function(a){c.resolve(a)},{includeHeaders:!0})).send();return c.getPromise()}e.exports=a}),null);
__d("VideoPlayerImplementationStateMachine",["VideoPlayerImplementationHelper","gkx","shallowEqual","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerImplementationHelper").getVideoPlayerErrorFromHTMLVideoElementError,h=b("VideoPlayerImplementationHelper").getVideoPlayerImplementationStateMachineUncontrolledState;function a(a){var b=a.playerImplementationName,c=a.playerVersion;a=a.streamingFormat;var d=!0,e=1,f=h(null,{current:null});return{controlledState:{availableQualities:[],bufferingDetected:!1,captionsVisible:!1,error:null,lastPauseReason:null,lastPlayReason:null,muted:d,playbackState:"paused",scrubbing:!1,seekTargetPosition:null,seeking:!1,selectedQuality:null,targetAudioQuality:"",targetPlaybackRate:1,targetVideoQuality:"",viewabilityPercentage:null,volume:e},playerImplementationName:b,playerVersion:c,streamingFormat:a,uncontrolledState:f}}function i(a,b,c){__p&&__p();switch(c.type){case"created":return babelHelpers["extends"]({},a,{playbackState:"paused"});case"dom_mounted":return a;case"dom_unmounted":return babelHelpers["extends"]({},a,{playbackState:"ended"});case"dom_ended":return babelHelpers["extends"]({},a,{playbackState:"ended"});case"dom_pause":if(a.playbackState==="ended")return a;if(b.videoElementEnded===!0)return babelHelpers["extends"]({},a,{playbackState:"ended"});return a.playbackState==="paused"?a:babelHelpers["extends"]({},a,{playbackState:"paused"});case"dom_play":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{playbackState:"stalling"});case"dom_playing":return a.bufferingDetected?a:babelHelpers["extends"]({},a,{playbackState:"playing"});case"dom_seeking":return babelHelpers["extends"]({},a,{seeking:!0});case"dom_seeked":b=a.playbackState;b=b==="paused"||b==="ended"?b:"stalling";return babelHelpers["extends"]({},a,{playbackState:b,seeking:!1});case"dom_waiting":return a;case"dom_volumechange":return a;case"dom_timeupdate":return a;case"dom_progress":return a;case"dom_durationchange":return a;case"dom_ratechange":return a;case"dom_error":b=g({videoElementError:c.payload.videoElementError,videoElementNetworkState:c.payload.videoElementNetworkState,videoElementReadyState:c.payload.videoElementReadyState});return babelHelpers["extends"]({},a,{error:b,playbackState:"paused"});case"dom_play_promise_rejected":return a.playbackState!=="stalling"?a:babelHelpers["extends"]({},a,{playbackState:"paused"});case"implementation_engine_initialized":return babelHelpers["extends"]({},a,{availableQualities:c.payload.availableQualities,targetVideoQuality:c.payload.targetVideoQuality});case"implementation_engine_destroyed":return babelHelpers["extends"]({},a,{playbackState:"ended"});case"implementation_engine_error":return babelHelpers["extends"]({},a,{error:c.payload.implementationError});case"representation_changed":return babelHelpers["extends"]({},a,{targetVideoQuality:c.payload.targetVideoQuality});case"controller_pause_requested":return babelHelpers["extends"]({},a,{lastPauseReason:c.payload.reason,playbackState:"paused"});case"controller_play_requested":return a.playbackState!=="paused"&&a.playbackState!=="ended"?a:babelHelpers["extends"]({},a,{lastPlayReason:c.payload.reason,playbackState:"stalling"});case"controller_seek_requested":return babelHelpers["extends"]({},a,{seekTargetPosition:c.payload.seekTargetPosition,seeking:!0});case"controller_quality_requested":return babelHelpers["extends"]({},a,{selectedQuality:c.payload.quality});case"controller_muted_requested":return babelHelpers["extends"]({},a,{muted:c.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},a,{volume:c.payload.volume});case"controller_scrub_begin_requested":return a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return!a.scrubbing?a:babelHelpers["extends"]({},a,{scrubbing:!1,seekTargetPosition:c.payload.seekTargetPosition,seeking:c.payload.seekTargetPosition!=null});case"buffering_begin_requested":return a.playbackState==="paused"||a.playbackState==="ended"?a:babelHelpers["extends"]({},a,{bufferingDetected:!0,playbackState:"stalling"});case"buffering_end_requested":return a.playbackState==="paused"||a.playbackState==="ended"?babelHelpers["extends"]({},a,{bufferingDetected:!1}):babelHelpers["extends"]({},a,{bufferingDetected:!1,playbackState:"playing"});case"viewability_changed":b=c.payload.viewabilityPercentage;return a.viewabilityPercentage===b?a:babelHelpers["extends"]({},a,{viewabilityPercentage:b});case"controller_captions_requested":b=c.payload.captionsVisible;return a.captionsVisible===b?a:babelHelpers["extends"]({},a,{captionsVisible:b});default:return a}}function j(a,c,d){var e=c.type!=="dom_seeking";e=e?d:a.uncontrolledState;d=!b("shallowEqual")(e,a.uncontrolledState);c=i(a.controlledState,e,c);var f=!b("shallowEqual")(c,a.controlledState);return d||f?babelHelpers["extends"]({},a,{controlledState:f?c:a.controlledState,uncontrolledState:d?e:a.uncontrolledState}):a}var k,l;function m(a,c,d){__p&&__p();var e=d,f=e,g=0,h=!1;return{dispatch:function(d){__p&&__p();if(g>10)if(!h){h=!0;throw b("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}else return;try{++g;var e=c(),i=f;e=j(i,d,e);f=e;a(i,e,d)}finally{--g}},getCurrentState:function(){return f},getInitialState:function(){return e}}}var n,o;function c(a,b,c){function d(a,c,d){try{var e=!0,f=0;while(e&&f<b.length){var g=b[f];e=g(a,c,d);++f}}finally{}}return m(d,a,c)}function d(a,b){function c(){}function d(c){return function(d){b(d.currentTarget),a.dispatch(c)}}return{onAbort:c,onCanPlay:c,onCanPlayThrough:c,onDurationChange:d({type:"dom_durationchange"}),onEmptied:c,onEncrypted:c,onEnded:d({type:"dom_ended"}),onError:function(c){b(c.currentTarget),a.dispatch({payload:{videoElementError:c.currentTarget.error,videoElementNetworkState:c.currentTarget.networkState,videoElementReadyState:c.currentTarget.readyState},type:"dom_error"})},onLoadStart:c,onLoadedData:c,onLoadedMetadata:c,onPause:d({type:"dom_pause"}),onPlay:d({type:"dom_play"}),onPlaying:d({type:"dom_playing"}),onProgress:d({type:"dom_progress"}),onRateChange:d({type:"dom_ratechange"}),onSeeked:d({type:"dom_seeked"}),onSeeking:d({type:"dom_seeking"}),onStalled:c,onSuspend:c,onTimeUpdate:d({type:"dom_timeupdate"}),onVolumeChange:d({type:"dom_volumechange"}),onWaiting:d({type:"dom_waiting"})}}e.exports={createReactVideoElementCallbacksForStateMachine:d,createVideoPlayerImplementationStateMachine:m,createVideoPlayerImplementationStateMachineInitialState:a,createVideoPlayerImplementationStateMachineWithEffects:c}}),null);
__d("VideoPlayerVersions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({HTML5:"html5",PLEASANTVILLE:"pleasantville",REACT:"react",REACT_PLEASANTVILLE:"react_pleasantville",REACT_SILVERCITY:"react_silvercity",SILVERCITY:"silvercity",OZ:"oz",REACT_OZ:"react_oz",COMET_OZ:"comet_oz",COMET_PROGRESSIVE:"comet_progressive",OLD_API_EXO:"old_api_exo",OLD_API_EXO_DEPRECATED:"old_api_exo_deprecated",OLD_API_EXO_NEW_LIB:"old_api_exo_new_lib",OLD_API_PSR:"old_api_psr",HEROPLAYER:"heroplayer",HEROPLAYER2:"heroplayer2",HEROPLAYER_GROOT_ELIGIBLE:"heroplayer_groot_eligible",HEROPLAYER2_GROOT_ELIGIBLE:"heroplayer2_groot_eligible",HEROPLAYER_CORE_PLUGINS:"heroplayer_only_core_plugins",HEROPLAYER_NON_CORE_PLUGINS:"heroplayer_other_plugins",HEROPLAYER2_CORE_PLUGINS:"heroplayer2_only_core_plugins",HEROPLAYER2_NON_CORE_PLUGINS:"heroplayer2_other_plugins",GROOTPLAYER:"grootplayer",GROOT:"groot",FNF:"fnf",LEGACY:"legacy",REFACTORED:"refactored",MBASIC:"mbasic",MTOUCH_SHAKA_LIVE:"mtouch_shaka_live",MTOUCH_SPHERICAL:"mtouch_360",MTOUCH_OZ:"mtouch_oz",CASTING_DEBUG:"casting_debug",CHROMECAST:"chromecast",WEBAPIS_AVPLAY:"webapis_avplay",FBLITE_LEGACY:"fblite_legacy",FBLITE_SURFACE:"fblite_surface",FBLITE_TEXTURE:"fblite_texture",HERO_SURFACE:"hero_surface",HERO_TEXTURE:"hero_texture",UNKNOWN:"unknown"})}),null);
__d("VideoPlayerImplementationStateMachineForOzImplementation",["Promise","VideoPlayerImplementationHelper","VideoPlayerImplementationStateMachine","VideoPlayerVersions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerImplementationHelper").getVideoPlayerImplementationStateMachineUncontrolledState,h=b("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineInitialState,i=b("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithEffects;function j(a,b){__p&&__p();b=(b=b.current)==null?void 0:b.player;if(b==null)return!1;var c=b.getIsVideoQualityAdaptationEnabled()?"auto":b.getCurrentQuality();if(a==null||c===a)return!1;if(a==="auto"){b.enableVideoQualityAdaptation();return!0}else if(a!==b.getCurrentQuality()){b.switchToVideoQuality(a);return!0}return!1}function a(a){__p&&__p();var c=a.ensureVideoElement,d=a.fullscreenControllerRef,e=a.getVideoElementMaybe,f=a.logger,k=a.notifySubscribers,l=a.ozPlayerPartsRef,m=a.setReactState,n=a.updateLoopStateOnImplementationEndedRef;a=[function(a,b,c){f.handleStateMachine(a,b,c);return!0},function(a,b,c){m(b);return!0},function(a,b,c){k();return!0},function(a,b,c){if(!(c.type==="dom_ended"))return!0;a=n.current;a();return!1},function(a,b,d){if(!(d.type==="controller_pause_requested"))return!0;a=b.controlledState.playbackState;if(!(a==="paused"))return!1;d=c();d.pause();o.dispatch({type:"controller_pause_synced_to_dom"});return!1},function(a,d,e){__p&&__p();if(!(e.type==="controller_play_requested"))return!0;a=d.controlledState.playbackState;if(!(a==="stalling"))return!1;e=c();d=e.play();o.dispatch({type:"controller_play_synced_to_dom"});d&&typeof d.then==="function"&&b("Promise").resolve(d)["catch"](function(a){o.dispatch({payload:{playPromiseRejectionReason:a},type:"dom_play_promise_rejected"})});return!1},function(a,b,d){if(!(d.type==="controller_seek_requested"))return!0;a=b.controlledState;d=a.seeking;b=a.seekTargetPosition;a=c();d&&b!=null&&(a.currentTime=b,o.dispatch({type:"controller_seek_synced_to_dom"}));return!1},function(a,b,d){if(!(d.type==="controller_muted_requested"))return!0;a=b.controlledState.muted;if(!(a===d.payload.muted))return!1;b=c();b.muted=a;o.dispatch({type:"controller_muted_synced_to_dom"});return!1},function(a,b,d){if(!(d.type==="controller_scrub_begin_requested"))return!0;a=c();a.playbackRate=0;o.dispatch({type:"controller_scrub_begin_synced_to_dom"});return!1},function(a,b,d){if(!(d.type==="controller_scrub_end_requested"))return!0;a=b.controlledState;d=a.seeking;b=a.seekTargetPosition;a=a.targetPlaybackRate;var e=c();d&&b!=null?(e.playbackRate=a,e.currentTime=b,o.dispatch({type:"controller_scrub_end_seek_synced_to_dom"})):(e.playbackRate=a,o.dispatch({type:"controller_scrub_end_cancel_synced_to_dom"}));return!1},function(a,b,d){if(!(d.type==="buffering_begin_requested"))return!0;a=c();a.playbackRate=0;o.dispatch({type:"buffering_begin_synced_to_dom"});return!1},function(a,b,d){if(!(d.type==="buffering_end_requested"))return!0;a=b.controlledState.targetPlaybackRate;d=c();d.playbackRate=a;o.dispatch({type:"buffering_end_synced_to_dom"});return!1},function(a,b,d){if(!(d.type==="controller_volume_requested"))return!0;a=c();d=b.controlledState.volume;if(a.volume===d)return!1;a.volume=d;o.dispatch({type:"controller_volume_synced_to_dom"});return!1},function(a,b,c){if(!(c.type==="controller_quality_requested"))return!0;a=j(b.controlledState.selectedQuality,l);a&&o.dispatch({type:"controller_quality_synced_to_dom"});return!1},function(a,b,d){__p&&__p();if(!(d.type==="implementation_initialized"))return!0;a=c();d=j(b.controlledState.selectedQuality,l);var e=!1;a.volume!==b.controlledState.volume&&(a.volume=b.controlledState.volume,e=!0);var f=!1;a.muted!==b.controlledState.muted&&(a.muted=b.controlledState.muted,f=!0);(d||e||f)&&o.dispatch({payload:{mutedSynced:f,selectedQualitySynced:d,volumeSynced:e},type:"implementation_initialized_synced_to_dom"});return!1}];var o=i(function(){var a=e();return g(a,d,function(a){var b;b=(b=l.current)==null?void 0:b.player;if(b==null)return null;b=b.getVideoRepresentationIDAtTime(a);return b==null?null:b})},a,h({playerImplementationName:"oz_v2",playerVersion:"comet_oz",streamingFormat:"dash"}));o.dispatch({type:"created"});return o}e.exports={createVideoPlayerImplementationStateMachineForOzImplementation:a}}),null);
__d("VideoPlayerBanzaiLogFlusher",["Banzai","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="video_player";a=function(){__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.flushLogs=function(){var a=this.$1.consumeLoggerEvents();a.forEach(function(a){var c={event:a.eventType,logData:a.logData,routeTracePolicy:a.routeTracePolicy,source:a.subOrigin};a=(a=a.logData)==null?void 0:a.ad_client_token;b("gkx")("1107827")?b("Banzai").post(g,c,b("Banzai").VITAL):a!=null?b("Banzai").post(g,c,b("Banzai").VITAL):b("Banzai").post(g,c)})};return a}();e.exports=a}),null);
__d("VideoPlayerImplementationStateMachineLogger",["VideoPlayerLoggerEvent","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange,h=6e4,i,j,k;function l(){return{canLogPlayingEvent:!0,dontLogPauseOnUnpausedSeeking:!1,hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,isLoggingScrubbingSequence:!1,lastStartTimePosition:null,lastTrackedRepresentation:null,nextHeartbeatTime:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,stallCount:0,stallCount200ms:0,stallStartTimestamp:0,stallTotalDuration:0,vplEventSequenceNumber:0}}function m(a,b){return b==="muted"||b==="unmuted"||b==="started_playing"||b==="caption_change"||b==="unpaused"?a.controlledState.captionsVisible?"on":"off":void 0}function a(a){__p&&__p();var c=new Map(),d=a.initialLoggingMetaData,e=[],f=l(),i=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);function j(a){var b=f.stallStartTimestamp;if(b>0){f.stallCount+=1;a=a-b;f.stallTotalDuration+=a;f.stallCount200ms+=a>200?1:0}}function k(a,b){__p&&__p();a=a.uncontrolledState.videoElementPlayheadPosition==null?null:a.uncontrolledState.videoElementPlayheadPosition;var c=null;switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"representation_ended":c=f.lastStartTimePosition;break;case"scrubbed":c=a;break;default:break}switch(b){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":f.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"representation_ended":f.lastStartTimePosition=a;break;default:break}return{video_last_start_time_position:c}}function n(a,b){var c=b.uncontrolledState.clockTimestamp;a=a.controlledState.playbackState;var d=b.controlledState.playbackState;a!=="stalling"&&d==="stalling"&&(f.stallStartTimestamp=c);a==="stalling"&&d!=="stalling"&&(j(b.uncontrolledState.clockTimestamp),f.stallStartTimestamp=0)}function o(a,b,c){__p&&__p();var d={stall_count:null,stall_count_200_ms:null,stall_time:null},e=b.uncontrolledState.clockTimestamp,g=function(){var a={stall_count:f.stallCount,stall_count_200_ms:f.stallCount200ms,stall_time:f.stallTotalDuration};f.stallCount=0;f.stallCount200ms=0;f.stallTotalDuration=0;f.stallStartTimestamp=0;return a};a=a.controlledState.playbackState;var h=b.controlledState.playbackState;a!=="stalling"&&h==="stalling"&&(f.stallStartTimestamp=e);switch(c){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"representation_ended":j(b.uncontrolledState.clockTimestamp);d=g();break;case"heart_beat":b.controlledState.playbackState!=="stalling"&&(j(b.uncontrolledState.clockTimestamp),d=g());break;default:break}return d}function p(g){__p&&__p();var h=g.prevState,j=g.state,l=g.eventType;g=g.logDataOverrides;var n=k(j,l);n=n.video_last_start_time_position;h=o(h,j,l);var p=h.stall_count,q=h.stall_count_200_ms;h=h.stall_time;var r=[],s=a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;s&&r.push(s);p={ad_client_token:d.coreVideoPlayerMetaData.adClientToken,autoplay_eligible:a.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay,autoplay_failure_reasons:JSON.stringify(r),autoplay_setting:a.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,browser_tab_id:b("getVideoBrowserTabId")(),caption_state:m(j,l),current_viewability_percentage:j.controlledState.viewabilityPercentage,external_log_id:d.coreVideoPlayerMetaData.externalLogID,external_log_type:d.coreVideoPlayerMetaData.externalLogType,playback_duration:j.uncontrolledState.videoElementDuration,playback_is_live_streaming:a.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:b("getPlayerFormatForLogData")(j.uncontrolledState.isFullscreen,d.coreVideoPlayerMetaData.playerFormat),player_instance_key:d.instanceKey,player_version:j.playerVersion,stall_count:p,stall_count_200_ms:q,stall_time:h,streaming_format:j.streamingFormat,tracking_nodes:a.initialLoggingMetaData.trackingNodes,video_id:d.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:n,video_play_reason:j.controlledState.lastPlayReason,video_player_height:(s=d.dimensions)==null?void 0:s.height,video_player_width:(r=d.dimensions)==null?void 0:r.width,video_time_position:j.uncontrolledState.videoElementPlayheadPosition};q={event_seq_num:++f.vplEventSequenceNumber,seq_num:i.has(l)?++f.sequenceNumber:null,time_ms:Date.now()};var t={};c.forEach(function(a,b){t[b]=a});n=babelHelpers["extends"]({},t,p,(h=g)!=null?h:{},q);r=(s=f.initialSuborigin)!=null?s:d.coreVideoPlayerMetaData.subOrigin;p=(j=d.coreVideoPlayerMetaData.initialTracePolicy)!=null?j:d.coreVideoPlayerMetaData.routeTracePolicy;e.push({eventType:l,logData:n,routeTracePolicy:p,subOrigin:r});f.initialSuborigin==null&&r!=null&&(f.initialSuborigin=r)}function q(a,c,d){p({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},d||{},{state:f.hasLoggedStartedPlaying?b("VideoPlayerLoggerPlayerStates").UNPAUSED:b("VideoPlayerLoggerPlayerStates").STARTED}),prevState:a,state:c})}function r(a,b,c){p({eventType:f.hasPendingRequestedPlaying?"cancelled_requested_playing":"paused",logDataOverrides:babelHelpers["extends"]({},c||{}),prevState:a,state:b})}function s(a,b,c){if(c.type==="dom_play_promise_rejected"&&f.hasPendingRequestedPlaying){c=c.payload.playPromiseRejectionReason;c!=null&&c.name==="NotAllowedError"&&p({eventType:"cancelled_requested_playing",logDataOverrides:{debug_reason:"not_allowed"},prevState:a,state:b});return!0}return!1}function t(a,b,c){if((c.type==="controller_play_requested"||c.type==="dom_play"&&!f.shouldIgnoreDomPlay)&&a.controlledState.playbackState!==b.controlledState.playbackState){q(a,b);return!0}return!1}function u(a,b,c){if(a.controlledState.playbackState==="stalling"&&b.controlledState.playbackState==="playing"&&f.canLogPlayingEvent){c=f.hasLoggedStartedPlaying?"unpaused":"started_playing";p({eventType:c,prevState:a,state:b});f.hasLoggedStartedPlaying=!0;f.canLogPlayingEvent=!1;return!0}return!1}function v(a,b,c){__p&&__p();var d=b.controlledState.playbackState,e=a.controlledState.playbackState;if(c.type==="controller_scrub_begin_requested"&&!a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){r(a,b);f.isLoggingScrubbingSequence=!0;return!0}if(c.type==="dom_seeking"&&!f.isLoggingScrubbingSequence&&d!=="paused"&&d!=="ended"){r(a,b);return!0}if(c.type==="controller_scrub_end_requested"&&a.controlledState.scrubbing&&d!=="paused"&&d!=="ended"){q(a,b,{video_time_position:c.payload.seekTargetPosition});return!0}if(c.type==="dom_seeked"){!f.isLoggingScrubbingSequence&&d!=="paused"&&d!=="ended"&&q(a,b);p({eventType:"scrubbed",prevState:a,state:b});f.isLoggingScrubbingSequence=!1;e!=="paused"&&e!=="ended"&&(f.canLogPlayingEvent=!0);return!0}return!1}function w(a,b,c){if(a.controlledState.playbackState!==b.controlledState.playbackState&&b.controlledState.playbackState==="ended"){p({eventType:"finished_playing",prevState:a,state:b});return!0}return!1}function x(a,b,c){if((c.type==="controller_pause_requested"||c.type==="dom_pause"&&!f.shouldIgnoreDomPause)&&a.controlledState.playbackState!==b.controlledState.playbackState){r(a,b);return!0}return!1}function y(a,b,c){var d=b.controlledState.playbackState;if(c.type==="implementation_unmounted"&&d!=="paused"&&d!=="ended"){r(a,b,{debug_reason:"unloaded"});return!0}return!1}function z(a,c,d){__p&&__p();d=c.controlledState.muted;var e=c.controlledState.volume,f=a.controlledState.muted,h=a.controlledState.volume;d=g({currMuted:d,currVolume:e,prevMuted:f,prevVolume:h});f={current_volume:Math.round(e*100)};switch(d){case"muted":p({eventType:"muted",logDataOverrides:f,prevState:a,state:c});return!0;case"unmuted":p({eventType:"unmuted",logDataOverrides:f,prevState:a,state:c});return!0;case null:if(h<e){p({eventType:"volume_increase",logDataOverrides:f,prevState:a,state:c});return!0}else if(h>e){p({eventType:"volume_decrease",logDataOverrides:f,prevState:a,state:c});return!0}else return!1;default:d;b("recoverableViolation")('Unexpected mutedStateChange "'+d+'"',"comet_video_player");return!1}}function A(a,b,c){c=b.uncontrolledState.videoRepresentationID;var d=f.lastTrackedRepresentation,e=b.controlledState.playbackState,g=b.controlledState.seeking;if(!g&&e!=="paused"&&e!=="ended"&&d!=null&&d!==c){p({eventType:"representation_ended",logDataOverrides:{next_representation_id:c,representation_id:d},prevState:a,state:b});f.lastTrackedRepresentation=c;return!0}d==null&&(f.lastTrackedRepresentation=c);return!1}function B(a,b,c){c=b.controlledState.playbackState;c==="paused"||c==="ended"?f.nextHeartbeatTime=null:c!=="stalling"&&f.nextHeartbeatTime==null&&(f.nextHeartbeatTime=Date.now()+h);var d=f.nextHeartbeatTime;if(d!=null){var e=Date.now();e>=d&&(c!=="stalling"&&p({eventType:"heart_beat",prevState:a,state:b}),f.nextHeartbeatTime=e+h)}}function C(a,b,c){if(c.type==="implementation_mounted"){p({eventType:"player_loaded",prevState:a,state:b});return!0}return!1}function D(a,b,c){var d=a.uncontrolledState.isFullscreen,e=b.uncontrolledState.isFullscreen;if(c.type==="fullscreen_changed"&&e!==d&&d!=null&&e!=null){e?p({eventType:"entered_fs",prevState:a,state:b}):p({eventType:"exited_fs",prevState:a,state:b});return!0}return!1}function E(a,b,c){var d=b.controlledState.playbackState,e=a.controlledState.viewabilityPercentage,f=b.controlledState.viewabilityPercentage;if(c.type==="viewability_changed"&&d!=="paused"&&d!=="ended"&&e!=null&&e!==f){p({eventType:"viewability_changed",prevState:a,state:b});return!0}return!1}function F(a,b,c){if(c.type==="controller_captions_requested"){p({eventType:"caption_change",prevState:a,state:b});return!0}return!1}return{consumeLoggerEvents:function(){return e.splice(0)},handleMetaData:function(a){var b=a.coreVideoPlayerMetaData.initialTracePolicy!==d.coreVideoPlayerMetaData.initialTracePolicy;d=a},handleStateMachine:function(a,b,c){__p&&__p();var d=b.controlledState.playbackState,e=a.controlledState.playbackState;n(a,b);var g=A(a,b,c)||B(a,b,c);s(a,b,c)||t(a,b,c)||u(a,b,c)||w(a,b,c)||x(a,b,c)||v(a,b,c)||z(a,b,c)||y(a,b,c)||C(a,b,c)||D(a,b,c)||E(a,b,c)||g||!1;F(a,b,c);(d==="paused"||d==="ended")&&(f.canLogPlayingEvent=!0);(e==="paused"||e==="ended")&&e!==d&&(f.hasPendingRequestedPlaying=!0);d==="playing"&&(f.hasPendingRequestedPlaying=!1);c.type==="controller_pause_requested"&&(f.hasPausedOnce=!0,f.shouldIgnoreDomPause=!0);c.type==="controller_play_requested"&&(f.hasPausedOnce=!0,f.shouldIgnoreDomPlay=!0);c.type==="dom_pause"&&(f.shouldIgnoreDomPause=!1);c.type==="dom_play"&&(f.shouldIgnoreDomPlay=!1)},setAdditionalLogData:function(a,b){c.set(a,b)}}}e.exports={HEARTBEAT_INTERVAL:h,createVideoPlayerImplementationStateMachineLogger:a}}),null);
__d("convertToViewabilityPercentage",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a>=.99)return 100;else if(a>=.75)return 75;else if(a>=.5)return 50;else if(a>=.25)return 25;else if(a>=0)return 0;else return-2}e.exports=a}),null);
__d("VideoPlayerOzImplementationV2.react",["BanzaiODS","HTML5OzDrmHelper","React","RunComet","VideoPlaybackQuality","VideoPlayerBanzaiLogFlusher","VideoPlayerDataSource","VideoPlayerImplementationHelper","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineForOzImplementation","VideoPlayerImplementationStateMachineLogger","convertToViewabilityPercentage","gkx","oz-player","oz-player/strategies/OzBufferingDetector","oz-player/utils/OzError","recoverableViolation","removeFromArray","requestManifest","stylex","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(c=b("React")).useCallback,h=c.useEffect,i=c.useLayoutEffect,j=c.useMemo,k=c.useRef,l=c.useState,m=b("VideoPlaybackQuality").getDroppedFrames,n=b("VideoPlaybackQuality").getTotalFrames,o=b("VideoPlayerDataSource").createDataSource,p=b("VideoPlayerDataSource").notifyAllDataSourceHandlers,q=(d=b("VideoPlayerImplementationHelper")).createVideoPlayerImplementationExposedState,r=d.getDurationFromVideoElement,s=d.getPlayheadPositionFromVideoElement,t=d.insertSegment,u=d.insertSourceBuffer,v=b("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine,w=b("VideoPlayerImplementationStateMachineForOzImplementation").createVideoPlayerImplementationStateMachineForOzImplementation,x=b("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger,y=!0,z="dash",A=2079;function B(a){if(a instanceof b("oz-player/utils/OzError")){var c=a.getExtra();return{errorCode:c.code,errorDescription:a.getDescription(),errorName:a.getType(),stack:a.stack,url:c.url}}else return{errorCode:null,errorDescription:a.name+" "+a.message,errorName:"OZ_JAVASCRIPT_NATIVE",stack:a.stack,url:null}}function C(a){__p&&__p();var c=a.debugTools;a.ensureVideoElement;var d=a.fullscreenControllerRef,e=a.logger,f=a.machine,g=a.subscribersRef;return{getCurrentState:function(){return q({debugTools:c,isAbrEnabled:!0,state:f.getCurrentState()})},getIsFullscreen:function(){var a=d.current;return a?a.getIsFullscreen():!1},getPlayheadPosition:function(){var a,b=0;return(a=f.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?a:b},pause:function(a){f.dispatch({payload:{reason:a},type:"controller_pause_requested"})},play:function(a){f.dispatch({payload:{reason:a},type:"controller_play_requested"})},requestSetIsFullscreen:function(a){var b=d.current;b&&b.requestSetIsFullscreen(a)},scrubBegin:function(){f.dispatch({type:"controller_scrub_begin_requested"})},scrubEnd:function(a){f.dispatch({payload:{seekTargetPosition:a},type:"controller_scrub_end_requested"})},seek:function(a){f.dispatch({payload:{seekTargetPosition:a},type:"controller_seek_requested"})},selectVideoQuality:function(a){f.dispatch({payload:{quality:a},type:"controller_quality_requested"})},setAdditionalLogData:function(a,b){e.setAdditionalLogData(a,b)},setMuted:function(a){f.dispatch({payload:{muted:a},type:"controller_muted_requested"})},setVolume:function(a){f.dispatch({payload:{volume:a},type:"controller_volume_requested"})},subscribe:function(a){var c=d.current,e=c?c.subscribe(a):null;g.current.push(a);return{remove:function(){e&&e.remove(),b("removeFromArray")(g.current,a)}}}}}function D(a){var b=k(a);i(function(){b.current=a},[a]);return b}function a(a){__p&&__p();var c=D(a.updateLoopStateOnImplementationEnded),d=k(null),e=g(function(){return d.current},[]),f=g(function(){var a=d.current;if(a==null)throw b("unrecoverableViolation")("video node has not been created yet","comet_video_player");return a},[]),i=D(a.experimentationConfig),E=k(null),F=l(o([[],[]])),G=F[0];F=l(o([null,null,null]));var H=F[0],I=k([]),J=a.fullscreenController,K=a.videoPlayerPassiveViewabilityInfo,L=k((F=J)!=null?F:null);h(function(){var a;L.current=(a=J)!=null?a:null},[J]);F=l(null);var M=F[0],N=F[1],O=k(a.loggingMetaData);F=l(function(){var a=x({initialLoggingMetaData:O.current}),c=new(b("VideoPlayerBanzaiLogFlusher"))(a);return{logFlusher:c,logger:a}});F=F[0];var P=F.logFlusher,Q=F.logger,R=g(function(){I.current.forEach(function(a){a()}),P.flushLogs()},[P]);h(R,[]);h(function(){Q.handleMetaData(a.loggingMetaData)},[Q,a.loggingMetaData]);F=l(function(){return w({ensureVideoElement:f,fullscreenControllerRef:L,getVideoElementMaybe:e,logger:Q,notifySubscribers:R,ozPlayerPartsRef:E,setReactState:N,updateLoopStateOnImplementationEndedRef:c})});var S=F[0];M=(F=M)!=null?F:S.getInitialState();h(function(){if(J){var a=J.subscribe(function(){S.dispatch({payload:{isFullscreen:J.getIsFullscreen()},type:"fullscreen_changed"})});return function(){a.remove()}}},[S,J]);h(function(){if(K){var a=K.subscribe(function(){var a=K.getCurrent();a=a.visiblePercentage;a=b("convertToViewabilityPercentage")(a);S.dispatch({payload:{viewabilityPercentage:a},type:"viewability_changed"})});return function(){a.remove()}}},[S,K]);h(function(){S.dispatch({type:"implementation_mounted"});var a=!1,c=function(){if(a)return;a=!0;S.dispatch({type:"implementation_unmounted"});d.remove()},d=b("RunComet").onUnload(c);return c},[S]);var T=g(function(a){if(d.current===a)return;if(a!=null&&d.current!=null&&d.current!==a)throw b("unrecoverableViolation")("The video element should not be recreated","comet_video_player");d.current=a;a!=null?S.dispatch({type:"dom_mounted"}):S.dispatch({type:"dom_unmounted"})},[S]);F=j(function(){return v(S,T)},[S,T]);var U=g(function(){__p&&__p();var a=d.current;if(a==null){b("recoverableViolation")("Representation change handled, but the video element is missing","comet_video_player");return}a=(a=E.current)==null?void 0:a.player;if(a==null){b("recoverableViolation")("Representation change handled, but the player is missing","comet_video_player");return}S.dispatch({payload:{targetVideoQuality:a.getCurrentQuality()},type:"representation_changed"})},[S]),V={getAudioRepresentationId:function(){var a,b=e();a=(a=E.current)==null?void 0:a.player;return a==null||b==null?null:a.getAudioRepresentationIDAtTime(s(b))},getBufferingDetector:function(){var a;return(a=(a=E.current)==null?void 0:a.bufferingDetector)!=null?a:null},getCurrentAudioMimeCodecs:function(){var a;a=(a=E.current)==null?void 0:a.player;if(a==null)return null;a=a.getCurrentAudioRepresentation();return a!=null?a.getMimeCodecs():null},getCurrentAudioRepresentation:function(){var a;a=(a=E.current)==null?void 0:a.player;return a==null?null:a.getCurrentAudioRepresentation()},getCurrentVideoMimeCodecs:function(){var a;a=(a=E.current)==null?void 0:a.player;if(a==null)return null;a=a.getCurrentVideoRepresentation();return a!=null?a.getMimeCodecs():null},getCurrentVideoRepresentation:function(){var a;a=(a=E.current)==null?void 0:a.player;return a==null?null:a.getCurrentVideoRepresentation()},getDrmProtectionStatus:function(){var a;a=(a=E.current)==null?void 0:a.player;return a==null?!1:a.isDrm()},getDroppedFrameCount:function(){var a=e();return a==null?null:m(a)},getManifest:function(){return a.manifest},getManifestUrl:function(){return a.manifestUrl},getOzPlayer:function(){var a;return(a=(a=E.current)==null?void 0:a.player)!=null?a:null},getPlayheadPosition:function(){var a=e();return a==null?null:s(a)},getStreamType:function(){return z},getTotalFrameCount:function(){var a=e();return a==null?null:n(a)},getVideoElement:function(){return f()},getVideoRepresentationId:function(){var a,b=e();a=(a=E.current)==null?void 0:a.player;return a==null||b==null?null:a.getVideoRepresentationIDAtTime(s(b))},useSegmentData:function(){return G},useSourceBuffer:function(){return H}},W=l(function(){return C({debugTools:V,ensureVideoElement:f,fullscreenControllerRef:L,logger:Q,machine:S,subscribersRef:I})});W=W[0];var X=g(function(a){__p&&__p();var c=a.graphQLVideoDRMInfo,d=a.handleOzPlayerInitError,e=a.handleOzPlayerRuntimeError,g=a.manifestUrl,h=a.manifestXmlStringInitial,i=a.manifestXmlStringResolved,j=a.onRepresentationChange,k=a.ozExperimentationConfig;a=a.videoFBID;try{k=k;var l=f(),m=c?b("HTML5OzDrmHelper").OzDrmManagerModule:null,n=[];c&&a!=null&&n.push(new(b("HTML5OzDrmHelper").OzWidevineDrmProviderModule)(a,c.graphApiVideoLicenseUri,c.videoLicenseUriMap,null,null));var o=new(b("oz-player"))({config:k,dimensions:{height:500,width:400},drmManagerModule:m,drmProviders:n,loggerConfig:{isOzDevConsoleEnabled:b("gkx")("722076"),observedOperationLoggers:[],perfLoggerProviders:[]},mpdUrl:g,rawMpdXml:i,videoNodeOrQuickStarter:l});o.onError(e);o.setupPlayer();o.addListener("switchVideoRepresentation",function(){j(o)});o.addListener("debug/dashPlayerEvent",function(a){a=a.detail;var b=a.type;switch(b){case"SegmentAppended":b=G.value;var c=H.value;t(b,a);u(c,a);p(G);p(H)}});var q=new(b("oz-player/strategies/OzBufferingDetector"))(l,k,function(){return r(l)});c=function(){S.dispatch({type:"buffering_begin_requested"})};m=function(){S.dispatch({type:"buffering_end_requested"})};q.addListener("enter_buffering",c);q.addListener("leave_buffering",m);return{bufferingDetector:q,destroy:function(){q.destroy(),o.destroy()},manifestUrl:g,manifestXmlStringInitial:h,manifestXmlStringResolved:i,player:o,videoFBID:a}}catch(a){d(a);return null}},[f,S,G,H]),Y=g(function(a){var b=E.current;b!=null&&(E.current=null,b.destroy(),S.dispatch({payload:{reason:a},type:"implementation_engine_destroyed"}))},[S]);h(function(){__p&&__p();var c=i.current;if(c==null)throw b("unrecoverableViolation")("Experimentation config is missing","comet_video_player");var d=!0;if(E.current!=null&&E.current.videoFBID===a.videoFBID&&(E.current.manifestXmlStringInitial!==null?E.current.manifestXmlStringInitial!==a.manifest:E.current.manifestUrl!==a.manifestUrl))b("BanzaiODS").bumpEntityKey(A,"OzImplementation","manifest_reloaded");else{var e=function(a){if(!d)return;S.dispatch({payload:{implementationError:B(a)},type:"implementation_engine_error"});d=!1;Y("implementation_error")},f=e,g=e;e=e;var h=function(b){b=X({graphQLVideoDRMInfo:a.graphQLVideoDRMInfo,handleOzPlayerInitError:g,handleOzPlayerRuntimeError:f,manifestUrl:a.manifestUrl,manifestXmlStringInitial:a.manifest,manifestXmlStringResolved:b,onRepresentationChange:U,ozExperimentationConfig:c,videoFBID:a.videoFBID});if(b==null)return;E.current=b;S.dispatch({payload:{availableQualities:b.player.getVideoQualities(),targetVideoQuality:b.player.getCurrentQuality()},type:"implementation_engine_initialized"})};if(a.manifest!==null)h(a.manifest);else if(a.manifestUrl!==null){var j=function(a){if(!d)return;h(a)};b("requestManifest")(a.manifestUrl).then(j,e)["catch"](g)}}return function(){d=!1,Y("react_effect_cleanup")}},[X,Y,i,U,S,a.manifest,a.manifestUrl,a.videoFBID]);M=q({debugTools:V,isAbrEnabled:!0,state:M});return b("React").createElement(b("React").Fragment,null,b("React").createElement("video",babelHelpers["extends"]({className:"k4urcfbm datstx6m a8c37x1j",controls:!1,muted:y},F,{ref:T})),a.renderWithVideoImplementationStates({implementationController:W,videoState:M}))}e.exports=a}),null);