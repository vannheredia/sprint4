if (self.CavalryLogger) { CavalryLogger.start_js(["ELhTs"]); }

__d("CometResourceDownloadLogger",["performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(a){var b=a.indexOf("?");return b===-1?a:a.substring(0,b)}function i(a,b){b=b.substring(b.lastIndexOf(".")+1);if(b==="js"||b==="css")return b;else if(a==="img"||b==="gif"||b==="png"||b==="jpg"||b==="ico")return"img";else return a}function j(){return{css:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},img:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0},js:{cacheCount:0,encodedBodySize:0,totalCount:0,transferSize:0}}}a=function(a,c){__p&&__p();if(typeof (g||(g=b("performance"))).getEntriesByType!=="function")return new Map();var d=j(),e=(g||(g=b("performance"))).getEntriesByType("resource").filter(function(b){return b.startTime>=a&&b.startTime<=c}).map(function(a){return{encodedBodySize:a.encodedBodySize,transferSize:a.transferSize,type:i(a.initiatorType,h(a.name))}}).filter(function(a){return d[a.type]});e.forEach(function(a){var b=d[a.type];b.encodedBodySize+=a.encodedBodySize;b.transferSize+=a.transferSize;b.totalCount++;a.transferSize===0&&b.cacheCount++});e=new Map();for(var f in d){var k=d[f];for(var l in k)e.set(f+"_"+l,k[l])}return e};e.exports=a}),null);
__d("CometVisualCompletionUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getBoundingClientRect:function(a,b){if(typeof a.getBoundingClientRect!=="function")return{bottom:0,left:0,right:0,top:0};a=a.getBoundingClientRect();var c=a.top,d=a.left,e=a.bottom;a=a.right;return{bottom:b!=null?b+(e-c):e,left:d,right:a,top:b!=null?b:c}},getPixels:function(a){return(a.right-a.left)*(a.bottom-a.top)},getRectIntersection:function(a,b){return{bottom:Math.max(Math.min(a.bottom,b.bottom),b.top),left:Math.min(Math.max(a.left,b.left),b.right),right:Math.max(Math.min(a.right,b.right),b.left),top:Math.min(Math.max(a.top,b.top),b.bottom)}},getRectangle:function(a,b){a=g.getBoundingClientRect(a);var c=a.top,d=a.left,e=a.bottom;a=a.right;e={bottom:e,left:d,right:a,top:c};return g.getRectIntersection(e,b)},getViewportSize:function(){return{height:window.innerHeight,width:window.innerWidth}},inAboveTheFold:function(a){a=a;var b=g.getViewportSize();a=g.getPixels(g.getRectangle(a,{bottom:b.height,left:0,right:b.width,top:-window.scrollY}));return a>0},offsetTop:function(a,b){__p&&__p();var c=0;a=a;while(a&&a.offsetParent&&typeof a.offsetTop==="number")c+=a.offsetTop,a=a.offsetParent;if(a&&a.offsetParent==null&&typeof a.getBoundingClientRect==="function"){var d=a.getBoundingClientRect();d=d.top;d>=0?c+=d:a===document.body&&(c-=b)}return c},trimHash:function(a){return a.split("#")[0]}};e.exports=g}),null);
__d("CometVisualCompletionTrace",["CometResourceDownloadLogger","CometVisualCompletionUtil","VisibilityListener","gkx","performance","performanceAbsoluteNow","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j=/url\(.*(http.*)\)/gi;a=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.$8=0;this.$9=0;this.$10=0;this.$11=0;this.initialScrollY=window.scrollY;this.scrolledVC=0;this.report=null;this.measureOriginalViewport=!0;this.scrollEventHandler=function(){f.addMarkerPoint("scroll_start",(g||(g=b("performanceAbsoluteNow")))()),window.removeEventListener("scroll",f.scrollEventHandler)};this.$5=new Map();this.$3=new Map();this.$1=[];this.$2=[];this.$7=0;this.$12=[];this.$13=new Set();this.$4=a;this.$6=(h||(h=b("CometVisualCompletionUtil"))).getViewportSize();this.$14=window.scrollY;this.navSequence=c;this.traceID=d;this.markerPoints=new Map();this.annotations=new Map();this.tagSet=new Map();this.navDone=!1;this.interactionType=e;window.addEventListener("scroll",this.scrollEventHandler,{passive:!0})}var c=a.prototype;c.addAnnotation=function(a,b){this.annotations.set(a,b)};c.addMarkerPoint=function(a,b,c){c===void 0&&(c={}),this.markerPoints.set(a,{data:c,timestamp:b-this.$4})};c.addVisualElement=function(a,b,c){this.$12.push([a,c,b,window.scrollY])};c.addTag=function(a,b){this.tagSet.has(a)||this.tagSet.set(a,new Set());a=this.tagSet.get(a);a&&a.add(b)};c.calculate=function(a){__p&&__p();var c=this;a===void 0&&(a=!0);window.removeEventListener("scroll",this.scrollEventHandler);this.$6=(h||(h=b("CometVisualCompletionUtil"))).getViewportSize();var d=(g||(g=b("performanceAbsoluteNow")))();this.$7=0;this.$9=0;this.$10=0;this.setResourceTimingMap();this.initTree();this.getImages();a&&b("gkx")("679542")&&this.getBackgroundImages();this.$8=this.calculatePaintedPixels(this.$1,this.$6.width*this.$6.height);var e={annotations:this.annotations,bgCheckLatency:this.$10,bgChecked:this.$7,bgNum:0,bgPixels:0,calcLatency:0,compNum:0,compPixels:0,elements:this.$2,finalScrollY:this.$14,imgNum:0,imgPixels:0,initialScrollY:this.initialScrollY,markerPoints:this.markerPoints,navComplete:this.$11,navSequence:this.navSequence,paintedPixels:this.$9,scrollY:window.scrollY,scrolledVC:this.scrolledVC,speedIndex:0,startTime:this.$4,tagSet:this.tagSet,totalPixels:this.$8,traceId:this.traceID,tracePolicy:this.tracePolicy,vcWithoutImage:0,viewport:this.$6,visuallyComplete:0};this.$2.length&&(this.$2=this.$2.sort(function(a,b){return b.latency-a.latency}),e.visuallyComplete=this.$2[0].latency,e.scrollY=this.$2[0].scrollY,this.addMarkerPoint("FP",this.$2[this.$2.length-1].timestamp),this.$2.forEach(function(a){__p&&__p();e.vcWithoutImage===0&&a.type==="component"&&(e.vcWithoutImage=a.latency);e.speedIndex+=a.pixels/c.$9*a.latency;switch(a.type){case"component":e.compNum++;e.compPixels+=a.pixels;break;case"img":e.imgNum++;e.imgPixels+=a.pixels;break;case"bg":e.bgNum++;e.bgPixels+=a.pixels;break}}));e.calcLatency=g()-d;this.setupMetaData(e);this.report=e;return e};c.findParent=function(a){a=a.parentElement;while(a){if(this.$3.has(a))return this.$3.get(a);a=a.parentElement}return null};c.getBackgroundImages=function(){__p&&__p();var c=this,d=(g||(g=b("performanceAbsoluteNow")))();this.$1.forEach(function(d){__p&&__p();if(typeof d.element.querySelectorAll==="function"){d=d.element.querySelectorAll(":not(img)");Array.prototype.forEach.call(d,function(d){__p&&__p();var e=c.findParent(d);if(!e||e.excluded)return;var f=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(d,c.initialScrollY),g=h.getBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=h.getRectIntersection(g,e.rectangle);var i=h.getPixels(g);if(!i)return;if(c.measureOriginalViewport&&f>c.$6.height)return;var j=c.getStyleBackground(d);if(j==null)return;j=h.trimHash(j);if(c.$5.has(j)){var k=c.$5.get(j)+b("performanceNavigationStart")();if(k>=c.$4){d={children:[],element:d,excluded:e.excluded,latency:Math.max(e.latency,k-c.$4),mutationType:"bg",offsetTop:f,parent:e,pixels:i,rectangle:g,scrollY:e.scrollY,timestamp:k,type:"bg",url:j,veid:String(a.$15++)};e.children.push(d)}}})}});this.$10=g()-d};c.getImages=function(){__p&&__p();var c=this;this.$1.forEach(function(d){__p&&__p();if(typeof d.element.querySelectorAll==="function"){d=d.element.querySelectorAll("img");Array.prototype.forEach.call(d,function(d){__p&&__p();if(typeof d.currentSrc!=="string"||d.currentSrc==="")return;var e=c.findParent(d);if(!e||e.excluded)return;var f=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(d,c.initialScrollY),g=h.getBoundingClientRect(d,c.measureOriginalViewport?f:void 0);g=h.getRectIntersection(g,e.rectangle);if(d.parentElement){var i=(h||(h=b("CometVisualCompletionUtil"))).getBoundingClientRect(d.parentElement,c.measureOriginalViewport?(h||(h=b("CometVisualCompletionUtil"))).offsetTop(d.parentElement,c.initialScrollY):void 0);g=h.getRectIntersection(g,h.getRectIntersection(i,e.rectangle))}i=h.getPixels(g);if(!i)return;if(c.measureOriginalViewport&&f>c.$6.height)return;var j=d.currentSrc;j=h.trimHash(j);if(c.$5.has(j)){var k=c.$5.get(j)+b("performanceNavigationStart")();if(k>=c.$4){d={children:[],element:d,excluded:e.excluded,latency:Math.max(e.latency,k-c.$4),mutationType:"img",offsetTop:f,parent:e,pixels:i,rectangle:g,scrollY:e.scrollY,timestamp:k,type:"img",url:j,veid:String(a.$15++)};e.children.push(d)}}})}})};c.getStyleBackground=function(a){__p&&__p();if(typeof window.getComputedStyle!=="function")return null;this.$7++;a=window.getComputedStyle(a);var b=a["background-image"];if(a.visibility!=="hidden"&&b&&b!=="none"){j.lastIndex=0;a=j.exec(b);if(a&&a.length>1)return a[1].replace('"',"")}return null};c.excludeElement=function(a){this.$13.add(a)};c.initTree=function(){__p&&__p();var c=this,d={bottom:this.$6.height,left:0,right:this.$6.width,top:-this.initialScrollY};this.$12.forEach(function(e){__p&&__p();var f=e[0],g=e[1],i=e[2];e=e[3];var j=(h||(h=b("CometVisualCompletionUtil"))).offsetTop(f,c.initialScrollY),k=h.getBoundingClientRect(f,c.measureOriginalViewport?j:void 0);k=h.getRectIntersection(k,d);if((h||(h=b("CometVisualCompletionUtil"))).inAboveTheFold(f)){g-c.$4>c.scrolledVC&&(c.scrolledVC=g-c.$4,c.$14=e);if(c.measureOriginalViewport&&j>c.$6.height)return;i={children:[],element:f,excluded:c.$13.has(f),latency:g-c.$4,mutationType:i,offsetTop:j,parent:null,pixels:(h||(h=b("CometVisualCompletionUtil"))).getPixels(k),rectangle:k,scrollY:e,timestamp:g,type:"component",veid:String(a.$15++)};c.$3.set(f,i)}});this.$3.forEach(function(a){if(a.excluded)return;var d=c.findParent(a.element);d?(a.rectangle=(h||(h=b("CometVisualCompletionUtil"))).getRectIntersection(a.rectangle,d.rectangle),a.pixels=h.getPixels(a.rectangle),d.children.push(a),a.parent=d):c.$1.push(a)})};c.setResourceTimingMap=function(){var a=this;if(typeof (i||(i=b("performance"))).getEntriesByType==="function"){var c=(i||(i=b("performance"))).getEntriesByType("resource");c.forEach(function(c){var d=(h||(h=b("CometVisualCompletionUtil"))).trimHash(c.name);a.$5.set(d,c.responseEnd)})}};c.calculatePaintedPixels=function(a,b){var c=this,d=b,e=0;a.filter(function(a){return!a.excluded}).sort(function(a,b){return b.timestamp-a.timestamp}).forEach(function(a){a.pixels=Math.min(d,a.pixels),e+=a.pixels,d-=a.pixels,a.pixels-=c.calculatePaintedPixels(a.children,a.pixels),a.timestamp>c.$4&&(c.$9+=a.pixels,c.$2.push(a))});return e};c.inOriginalViewport=function(a){return(h||(h=b("CometVisualCompletionUtil"))).inAboveTheFold(a)&&(h||(h=b("CometVisualCompletionUtil"))).offsetTop(a,this.initialScrollY)<=this.$6.height};c.setInitialScrollY=function(a){this.initialScrollY=a};c.setNavCompleteTime=function(a){this.$11=a,this.navDone=!0};c.setTracePolicy=function(a){this.tracePolicy=a};c.setupMetaData=function(a){__p&&__p();var c=b("VisibilityListener").getHiddenTimings(a.startTime,a.startTime+a.visuallyComplete);if(c!=null&&c.length>0){c=c.filter(function(b){return b.key>=a.startTime&&b.key<=a.startTime+a.visuallyComplete});for(var d=0;d<c.length;d++)if(c[d].value){a.markerPoints.set("backgrounded",{timestamp:c[d].key-this.$4});break}}c=b("VisibilityListener").getHiddenTime(a.startTime,a.startTime+a.visuallyComplete);a.annotations.set("hidden",c!=null&&c>0?1:0);a.tracePolicy!=null&&a.tracePolicy!==""&&a.annotations.set("tracePolicy",a.tracePolicy);a.annotations.set("interactionId",a.traceId);a.annotations.set("height",a.viewport.height);a.annotations.set("width",a.viewport.width);a.annotations.set("scrollY",a.scrollY);a.annotations.set("finalScrollY",a.finalScrollY);a.annotations.set("initialScrollY",a.initialScrollY);a.annotations.set("overhead",a.calcLatency);a.annotations.set("navSequence",a.navSequence);a.speedIndex>0&&a.markerPoints.set("speedIndex",{timestamp:a.speedIndex});a.navSequence===1&&(i||(i=b("performance")))&&(i||(i=b("performance"))).timing&&((i||(i=b("performance"))).timing.responseStart&&a.markerPoints.set("TTFB",{timestamp:(i||(i=b("performance"))).timing.responseStart-a.startTime}));a.elements.length&&(a.vcWithoutImage>0&&a.markerPoints.set("vcWithoutImage",{timestamp:a.vcWithoutImage}),this.measureOriginalViewport&&a.scrolledVC>0&&a.markerPoints.set("scrolledVC",{timestamp:a.scrolledVC}));d=b("CometResourceDownloadLogger")(a.startTime-b("performanceNavigationStart")(),a.startTime+a.visuallyComplete-b("performanceNavigationStart")());d.forEach(function(b,c){a.annotations.set(c,b)})};return a}();a.$15=1;e.exports=a}),null);
__d("CometVisualCompletionTraceForInteraction",["requireCond","CometInteractionTracingMetrics","cr:683059","CometVisualCompletionTrace","CometVisualCompletionUtil","IntersectionObserver","JSScheduler","MutationObserver","intersectionObserverEntryIsIntersecting","performance","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j={attributes:!0,characterData:!0,childList:!0,subtree:!0};function k(a){return typeof a.getAttribute!=="function"?!0:!a.getAttribute("data-novc")}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f){__p&&__p();var h;h=a.call(this,c,d,e,f)||this;h.$CometVisualCompletionTraceForInteraction1=new Set();h.$CometVisualCompletionTraceForInteraction2=new Set();h.$CometVisualCompletionTraceForInteraction3=new Map();h.$CometVisualCompletionTraceForInteraction4=0;h.$CometVisualCompletionTraceForInteraction5=[];h.$CometVisualCompletionTraceForInteraction6=[];h.mutationCallback=function(a){var c="m_"+h.$CometVisualCompletionTraceForInteraction4++;h.holdTrigger(c);b("requestAnimationFrame")(function(){h.mutationRecordHandler(a),h.resumeTrigger(c)})};h.waitImage=function(a){__p&&__p();if(a.src==null||a.src===""||a.src.indexOf("http")!==0)return;var c=a.src,d;c.indexOf("#")>=0&&(d=(g||(g=b("CometVisualCompletionUtil"))).trimHash(c));if(!h.checkResourceTimingDone(c)&&(d==null||!h.checkResourceTimingDone(d))){var e=new Image();e.onload=e.onerror=function(){b("JSScheduler").scheduleNormalPriCallback(function(){h.imageDone(c),e=null})};h.imageWait(c);e.src=a.src}};h.mutationObserver=new(b("MutationObserver"))(h.mutationCallback);h.measureOriginalViewport=!1;return h}var d=c.prototype;d.checkResourceTimingDone=function(a){a=(h||(h=b("performance"))).getEntriesByName(a);return a.length>0&&a[0].responseEnd};d.holdTrigger=function(a){var b=this;this.$CometVisualCompletionTraceForInteraction1.add(a);return function(){b.resumeTrigger(a)}};d.loadingStateShown=function(a,b,c){var d=b;b||(this.holdTrigger(a),this.markerPoints.has("loadingState_start")||this.addMarkerPoint("loadingState_start",c),d=!0);return d};d.loadingStateRemoved=function(a,b,c){var d=b;b&&(this.addMarkerPoint("loadingState_end",c),d=!1,this.resumeTrigger(a));return d};d.imageDone=function(a){var c=this;if(!this.$CometVisualCompletionTraceForInteraction2.has(a))return;this.$CometVisualCompletionTraceForInteraction2["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.imageWait=function(a){this.$CometVisualCompletionTraceForInteraction2.add(a)};d.mutationRecordHandler=function(a){__p&&__p();var b=[];Array.prototype.forEach.call(a,function(a){__p&&__p();if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.prototype.forEach.call(a.addedNodes,function(a){k(a)&&b.push([a,"mutationAdd"])});else if(a.type==="attributes"&&k(a.target))if(a.attributeName==="hidden")b.push([a.target,"mutationHiddenAttribute"]);else if(a.attributeName==="style"){var c=a.target.getAttribute("style");c!=null&&c!==""&&c.contains("visibility")&&b.push([a.target,"mutationHiddenAttribute"])}});this.trackElements(b)};d.observeLoadingState=function(a){__p&&__p();var c=this;(g||(g=b("CometVisualCompletionUtil"))).inAboveTheFold(a)&&this.addMarkerPoint("loadingState_start",(i||(i=b("performanceAbsoluteNow")))());var d=function(a,d){var e=(i||(i=b("performanceAbsoluteNow")))();b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(a,function(a){b("intersectionObserverEntryIsIntersecting")(a)?c.markerPoints.has("loadingState_start")||c.addMarkerPoint("loadingState_start",e):c.markerPoints.has("loadingState_start")&&c.addMarkerPoint("loadingState_end",e)})})};d=new(b("IntersectionObserver"))(d);d.observe(a);this.$CometVisualCompletionTraceForInteraction6.push(d)};d.waitLoadingState=function(a){__p&&__p();var c=this,d=this.$CometVisualCompletionTraceForInteraction3.get(a);if(d!=null)return d;var e=!1,f="l_"+this.$CometVisualCompletionTraceForInteraction4++;(g||(g=b("CometVisualCompletionUtil"))).inAboveTheFold(a)&&(e=this.loadingStateShown(f,e,(i||(i=b("performanceAbsoluteNow")))()));d=function(a,d){var g=(i||(i=b("performanceAbsoluteNow")))();b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(a,function(a){b("intersectionObserverEntryIsIntersecting")(a)?e=c.loadingStateShown(f,e,g):e=c.loadingStateRemoved(f,e,g)})})};var h=new(b("IntersectionObserver"))(d);h.observe(a);d=function(){h.disconnect(),c.$CometVisualCompletionTraceForInteraction3["delete"](a),e=c.loadingStateRemoved(f,e,(i||(i=b("performanceAbsoluteNow")))())};this.$CometVisualCompletionTraceForInteraction3.set(a,d);return d};d.resumeTrigger=function(a){var c=this;if(!this.$CometVisualCompletionTraceForInteraction1.has(a))return;this.$CometVisualCompletionTraceForInteraction1["delete"](a);b("JSScheduler").scheduleLoggingPriCallback(function(){c.runInstrumentation()})};d.observeMutation=function(a){this.mutationObserver.observe(a,j)};d.trackElements=function(a){__p&&__p();var c=this,d=(i||(i=b("performanceAbsoluteNow")))();a.forEach(function(a){__p&&__p();var e=a[0];a=a[1];if(e.tagName==="IMG"){c.waitImage(e);return}c.addVisualElement(e,a,d);c.interactionType==="INTERACTION"&&b("cr:683059")&&b("cr:683059").excludeElement(e);if(typeof (h||(h=b("performance"))).getEntriesByName==="function"&&e.nodeType===Node.ELEMENT_NODE){a=e.querySelectorAll("img");Array.prototype.forEach.call(a,c.waitImage)}})};d.onComplete=function(a){this.$CometVisualCompletionTraceForInteraction5.push(a)};d.runInstrumentation=function(){__p&&__p();if(this.report!=null||this.$CometVisualCompletionTraceForInteraction1.size>0||this.$CometVisualCompletionTraceForInteraction2.size>0)return;this.mutationObserver.disconnect();this.$CometVisualCompletionTraceForInteraction3.forEach(function(a){a()});this.$CometVisualCompletionTraceForInteraction6.forEach(function(a){a.disconnect()});var a=b("CometInteractionTracingMetrics").get(this.traceID);a&&(this.copyVCReport(a),this.$CometVisualCompletionTraceForInteraction5.forEach(function(a){a()}))};d.copyVCReport=function(a,b){__p&&__p();b===void 0&&(b=!0);b=this.calculate(b);b.visuallyComplete>0&&(this.markerPoints.has("loadingState_start")&&!this.markerPoints.has("loadingState_end")&&this.addMarkerPoint("loadingState_end",b.visuallyComplete+a.start),a.markerPoints.visuallyComplete={timestamp:b.visuallyComplete+a.start,type:"VisualCompletion"});a.vcReport=b;b.annotations.forEach(function(b,c){a.metadata[c]=b});b.markerPoints.forEach(function(b,c){var d=b.data;b=b.timestamp;a.markerPoints[c]={data:d,timestamp:b+a.start,type:"VisualCompletion"}})};return c}(b("CometVisualCompletionTrace"));e.exports=a}),null);
__d("CometInteractionVC",["CometInteractionTracingMetrics","CometVisualCompletionTraceForInteraction","CometVisualCompletionUtil","performanceAbsoluteNow","performanceNavigationStart","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("performanceNavigationStart")();a={addRenderingInfo:function(a,c,d){var e=b("CometInteractionTracingMetrics").currentInteractionLogger();b("requestAnimationFrame")(function(){e.forEach(function(e){if(e.vcTracker){var f=Number((g||(g=b("CometVisualCompletionUtil"))).inAboveTheFold(a)),i=(h||(h=b("performanceAbsoluteNow")))(),j={visible:f};d!=null&&(j.position=d);e.vcTracker&&e.vcTracker.addMarkerPoint("Render_"+c+(d!=null?"_"+d:""),i,j);f===1&&(d!=null&&(e.vcTracker&&e.vcTracker.addMarkerPoint("Render_"+c+"_LastVisible",i,j)),e.vcTracker&&e.vcTracker.addMarkerPoint("LastVisibleRender",i,babelHelpers["extends"]({},j,{name:c})))}})})},observeLoadingState:function(a,c){a=b("CometInteractionTracingMetrics").get(a);a&&a.vcTracker&&a.vcTracker.observeLoadingState(c)},observeMutation:function(a,c){a=b("CometInteractionTracingMetrics").get(a);a&&a.vcTracker&&a.vcTracker.observeMutation(c)},startVisualCompletionTrace:function(a){a=b("CometInteractionTracingMetrics").get(a);a&&(a.type==="INTERACTION"||a.type==="TAIL_LOAD")&&!a.vcTracker&&(a.vcTracker=new(b("CometVisualCompletionTraceForInteraction"))(a.start+i,0,a.traceId,a.type),a.vcTracker.holdTrigger(a.traceId))},trackLoadingState:function(a){var c=[];b("CometInteractionTracingMetrics").currentInteractionLogger().forEach(function(b){b.vcTracker&&c.push(b.vcTracker.waitLoadingState(a))});return c},trackVisualCompletion:function(a){var c=b("CometInteractionTracingMetrics").currentInteractionLogger();b("requestAnimationFrame")(function(){c.forEach(function(b){b.vcTracker&&(b.vcTracker.trackElements([[a,"mutationRoot"]]),b.vcTracker&&b.vcTracker.observeMutation(a))})})}};e.exports=a}),null);
__d("CometPerfLogger",["QuickPerformanceLogger","VisibilityListener","performance","performanceNavigationStart"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("performanceNavigationStart")(),i=10;function j(a,c,d){d===void 0&&(d=0),b("QuickPerformanceLogger").annotateMarkerInt(a,"numReactCommit",c.size,d)}function k(a,c,d){d===void 0&&(d=0);for(var e in c.metadata){var f=c.metadata[e];typeof f==="string"?b("QuickPerformanceLogger").annotateMarkerString(a,e,f,d):typeof f==="number"&&b("QuickPerformanceLogger").annotateMarkerInt(a,e,f,d)}for(var g in c.tagSet){f=Array.from(c.tagSet[g]);b("QuickPerformanceLogger").annotateMarkerStringArray(a,g,f,d)}}function l(a,c,d){d===void 0&&(d=0);for(var e in c){var f=c[e],g=f.timestamp;f=f.data;b("QuickPerformanceLogger").markerPoint(a,e,f&&Object.keys(f).length?JSON.stringify(f):void 0,d,g+h)}}function m(a,c,d){d===void 0&&(d=0);for(var e in c)for(var f=0;f<c[e].length;f++){var g=c[e][f],j=g.start,k=g.end;g=g.data;var l=c[e].length===1?e:e+"_"+(f>=i?"MAX":f+1);b("QuickPerformanceLogger").markerPoint(a,l+"_start",void 0,d,j+h);b("QuickPerformanceLogger").markerPoint(a,l+"_end",Object.keys(g).length?JSON.stringify(g):void 0,d,k+h)}}a={copyVcQplMetrics:function(a,b){b.visuallyComplete>0&&(a.markerPoints.visuallyComplete={timestamp:b.visuallyComplete+b.startTime-h,type:"VisualCompletion"}),b.markerPoints.forEach(function(c,d){a.markerPoints[d]={data:c.data,timestamp:c.timestamp+b.startTime-h,type:d in a.markerPoints?a.markerPoints[d].type:"VisualCompletion"}}),b.annotations.forEach(function(b,c){a.metadata[c]=b}),a.hasVcMetrics=!0},initQPL:function(a,c,d){b("QuickPerformanceLogger").markerStart(a,d,c+h)},logQPL:function(a,c,d){__p&&__p();j(a,c.commitSet,d);k(a,c,d);l(a,c.markerPoints,d);m(a,c.subSpans,d);var e=b("VisibilityListener").getHiddenTime(c.start+h,c.completed+h);e=e!=null&&e>0?1:0;b("QuickPerformanceLogger").annotateMarkerInt(a,"hidden",e,d);e=c.wasCanceled?4:2;b("QuickPerformanceLogger").markerEnd(a,e,d,c.completed+h);return e},logServerTimings:function(a,c){__p&&__p();var d=typeof window.qpl_inl==="function"?window.qpl_inl():{};d=d[a+"-server"];if(d){a=((g||(g=b("performance")))==null?void 0:(g||(g=b("performance"))).timing)||{};var e=h;a.requestStart&&a.responseStart&&d.htmlStart&&(e=(a.requestStart+a.responseStart-d.htmlStart)/2);b("QuickPerformanceLogger").markerStart(29818883,0,e);k(29818883,c);a=0;for(var f in d)a=Math.max(a,d[f]),b("QuickPerformanceLogger").markerPoint(29818883,f,void 0,0,d[f]+e);b("QuickPerformanceLogger").markerEnd(29818883,2,0,a+e)}}};e.exports=a}),null);
__d("CometVisualChangeObserver",["CometVisualCompletion","CometVisualCompletionUtil","JSScheduler","MutationObserver","performance","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j=new Map(),k=1,l={attributes:!0,characterData:!0,childList:!0,subtree:!0};function m(a){a=(g||(g=b("performance"))).getEntriesByName(a);return a.length>0&&a[0].responseEnd}function n(a){__p&&__p();if(a.src==null||a.src===""||a.src.indexOf("http")!==0)return;var c=a.src,d;c.indexOf("#")>=0&&(d=(h||(h=b("CometVisualCompletionUtil"))).trimHash(c));if(!m(c)&&(d==null||!m(d))){var e=new Image();e.onload=e.onerror=function(){b("JSScheduler").scheduleNormalPriCallback(function(){b("CometVisualCompletion").imageDone(c),e=null})};b("CometVisualCompletion").imageWait(c);e.src=a.src}}function o(a){__p&&__p();var c=(i||(i=b("performanceAbsoluteNow")))();a.forEach(function(a){__p&&__p();var d=a[0];a=a[1];if(d.tagName==="IMG"){n(d);return}b("CometVisualCompletion").addVisualElement(d,a,c);if(typeof (g||(g=b("performance"))).getEntriesByName==="function"&&d.nodeType===Node.ELEMENT_NODE){a=d.querySelectorAll("img");Array.prototype.forEach.call(a,n)}})}var p=0;function q(a){return typeof a.getAttribute!=="function"?!0:!a.getAttribute("data-novc")}var r=function(a){__p&&__p();var c=[];Array.prototype.forEach.call(a,function(a){__p&&__p();if(a.type==="childList"&&a.addedNodes&&a.addedNodes.length)Array.prototype.forEach.call(a.addedNodes,function(a){q(a)&&c.push([a,"mutationAdd"])});else if(a.type==="attributes"&&q(a.target))if(a.attributeName==="hidden")b("CometVisualCompletion").checkLoadingStates(a.target),c.push([a.target,"mutationHiddenAttribute"]);else if(a.attributeName==="style"){var d=a.target.getAttribute("style");d!=null&&d!==""&&d.contains("visibility")&&(b("CometVisualCompletion").checkLoadingStates(a.target),c.push([a.target,"mutationHiddenAttribute"]))}});o(c)};a=function(a){var c="m_"+p++;b("CometVisualCompletion").holdTrigger(c);b("requestAnimationFrame")(function(){r(a),b("CometVisualCompletion").resumeTrigger(c)})};var s=new(b("MutationObserver"))(a);c={observe:function(a,b){b===void 0&&(b=!1);var c=k++;j.set(c,a);b||o([[a,"mutationRoot"]]);s.observe(a,l);return function(){j["delete"](c)}},start:function(){j.forEach(function(a){s.observe(a,l)})},stop:function(){s.disconnect()}};e.exports=c}),null);
__d("CometVisualCompletionQPL",["CometInteractionTracingMetrics","QuickPerformanceLogger","gkx","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=27983873;function i(a){var c=b("CometInteractionTracingMetrics").get(a.traceId);if(c){c.metadata.containsDataFromOtherInteraction&&a.annotations.set("containsDataFromOtherInteraction",1);if(c.subSpans.EventQueued!=null){c=c.subSpans.EventQueued[0];a.markerPoints.set("eventQueueEnd",{timestamp:c.end-c.start})}}}function j(a){b("QuickPerformanceLogger").markerStart(h,0,a)}function k(a,c){i(a),a.markerPoints.forEach(function(c,d){var e=c.timestamp;c=c.data;b("QuickPerformanceLogger").markerPoint(h,d,c&&Object.keys(c).length?JSON.stringify(c):void 0,0,e+a.startTime)}),a.tagSet.forEach(function(a,c){a=Array.from(a);b("QuickPerformanceLogger").annotateMarkerStringArray(h,c,a,0)}),a.annotations.forEach(function(a,c){typeof a==="string"?b("QuickPerformanceLogger").annotateMarkerString(h,c,a,0):typeof a==="number"&&b("QuickPerformanceLogger").annotateMarkerInt(h,c,a,0)}),b("QuickPerformanceLogger").annotateMarkerString(h,"rendering_strategy_selection_implementation",b("gkx")("940313")?"parallel":"serial"),b("QuickPerformanceLogger").markerEnd(h,c,0,a.visuallyComplete+a.startTime)}function l(){b("QuickPerformanceLogger").markerDrop(h,0)}a={drop:function(){l()},logIncompleteVC:function(a){if(a.tracePolicy==null||a.tracePolicy===""){l();return}a.visuallyComplete=(g||(g=b("performanceAbsoluteNow")))()-a.startTime;k(a,4)},logVC:function(a){a.tracePolicy==null||a.tracePolicy===""||a.visuallyComplete===0?l():k(a,2)},start:function(a){j(a)}};e.exports=a}),null);
__d("CometVisualCompletion",["CometInteractionTracingMetrics","CometPerfLogger","CometVisualChangeObserver","CometVisualCompletionConstants","CometVisualCompletionQPL","CometVisualCompletionTrace","CometVisualCompletionUtil","IntersectionObserver","JSScheduler","JSTracing","intersectionObserverEntryIsIntersecting","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=0,j=new Set(),k=new Map(),l=new Set(),m=null,n=new Map(),o,p=[],q=[];function r(){p.forEach(function(a){a(o)}),u.logQPL()}function s(){b("JSScheduler").scheduleLoggingPriCallback(function(){if(m==null||o||j.size>0||k.size>0||l.size>0)return;b("CometVisualChangeObserver").stop();o=m.calculate();r()})}function t(a){q.forEach(function(a){a(o)}),q=[]}var u={addAnnotation:function(a,b){m!=null&&m.addAnnotation(a,b)},addMarkerPoint:function(a,c,d){c===void 0&&(c=(g||(g=b("performanceAbsoluteNow")))()),d===void 0&&(d={}),m!=null&&c!=null&&c>0&&m.addMarkerPoint(a,c,d)},addRenderingInfo:function(a,c,d){__p&&__p();var e=[],f=b("JSTracing").getCurrent();f&&f.size&&f.forEach(function(a){a=b("CometInteractionTracingMetrics").get(a.name);e.push(a?a.type:"UNKNOWN")});b("requestAnimationFrame")(function(){if(m!=null&&o==null&&a!=null){var f=m.inOriginalViewport(a)?1:0,h=(g||(g=b("performanceAbsoluteNow")))(),i={interaction:e.join(","),visible:f};d!=null&&(i.position=d);(d==null||d<10)&&u.addMarkerPoint("Render_"+c+(d!=null?"_"+d:""),h,i);f===1&&(d!=null&&u.addMarkerPoint("Render_"+c+"_LastVisible",h,i),u.addMarkerPoint("LastVisibleRender",h,babelHelpers["extends"]({},i,{name:c})))}})},addTag:function(a,b){m!=null&&m.addTag(a,b)},addTracedInteraction:function(a,c,d){__p&&__p();var e=1,f=null;n.get(a)&&(e=n.get(a)+1);n.set(a,e);if(m!=null){m.addAnnotation("count_"+a,e);if(e>10)return function(){};f=m.traceID;m.addMarkerPoint(a+"_"+e+"_start",(g||(g=b("performanceAbsoluteNow")))(),{interactionId:c,qplEvent:d})}return function(){m!=null&&m.traceID===f&&m.addMarkerPoint(a+"_"+e+"_end",(g||(g=b("performanceAbsoluteNow")))(),{interactionId:c,qplEvent:d})}},addVisualElement:function(a,c,d){d===void 0&&(d=(g||(g=b("performanceAbsoluteNow")))()),m!=null&&a!=null&&m.addVisualElement(a,c,d)},checkLoadingStates:function(a){a=a.querySelectorAll("["+b("CometVisualCompletionConstants").LOADING_ELEMENT_ATTR+"]");Array.prototype.forEach.call(a,function(a){u.inAboveTheFold(a)&&u.waitOnLoadingElement(a)})},dumpWaits:function(){return[j,new Set(k.keys()),l]},excludeElement:function(a){m!=null&&o==null&&m.excludeElement(a)},getReport:function(){return o},holdTrigger:function(a){j.add(a);return function(){u.resumeTrigger(a)}},imageDone:function(a){if(!l.has(a))return;l["delete"](a);s()},imageWait:function(a){l.add(a)},inAboveTheFold:function(a){return(h||(h=b("CometVisualCompletionUtil"))).inAboveTheFold(a)},loadingElementDone:function(a){var b=k.get(a);if(b==null)return;k["delete"](a);s()},logIncompleteVC:function(a,c){__p&&__p();if(m!=null&&o==null){m.addAnnotation("incompleteWaitCount",j.size);m.addAnnotation("incompleteLoadingElementsCount",k.size);m.addAnnotation("incompleteImageCount",l.size);m.addAnnotation("cancelType",c);c=m.calculate(!1);b("CometVisualCompletionQPL").logIncompleteVC(c);a!=null&&c!=null&&!a.hasVcMetrics&&(a.wasCanceled=!0,b("CometPerfLogger").copyVcQplMetrics(a,c));return c}else return null},logQPL:function(){o&&(b("CometVisualCompletionQPL").logVC(o),t(o))},onComplete:function(a){q.push(a)},resumeTrigger:function(a){if(!j.has(a))return;j["delete"](a);s()},setInitialScrollY:function(a){m!=null&&m.setInitialScrollY(a)},setRoute:function(a){m!=null&&a!=null&&m.setTracePolicy(a)},subscribe:function(a){p.push(a)},traceNavigation:function(a,c,d){__p&&__p();var e=null;if(m!=null&&o==null){e=m.traceID;var f=b("CometInteractionTracingMetrics").get(m.traceID);if(f!=null){f=u.logIncompleteVC(f,"navigation");t(f)}}b("CometVisualCompletionQPL").start(c);m=new(b("CometVisualCompletionTrace"))(c,++i,a,d);e!=null&&m.addAnnotation("incompletePreviousTrace",e);o=null;n.clear();j.clear();k.clear();l.clear();u.holdTrigger(a);f=function(b){m!=null&&a===m.traceID&&(b.completed!=null&&m.setNavCompleteTime(b.completed-b.start))};r();return f},unsubscribe:function(a){p=p.filter(function(b){return b!==a})},waitOnLoadingElement:function(a){__p&&__p();var c=k.get(a);if(c!=null)return c;c=function(c,d){b("JSScheduler").scheduleNormalPriCallback(function(){Array.prototype.forEach.call(c,function(c){b("intersectionObserverEntryIsIntersecting")(c)||(d.disconnect(),u.loadingElementDone(a))})})};var d=new(b("IntersectionObserver"))(c);d.observe(a);c=function(){d.disconnect(),u.loadingElementDone(a)};k.set(a,c);return c}};e.exports=u}),null);
__d("CometHeroInteractionImpl.react",["Promise","CometHeroInteractionContext","CometHeroInteractionIDContext","CometHeroLogging","CometInteractionTracingMetrics","FBLogger","HiddenSubtreePassiveContext","PromiseAnnotate","React","cancelAnimationFrame","relay-experimental/ProfilerContext","relay-runtime","requestAnimationFrame","useLayoutEffect_SAFE_FOR_SSR","useStable","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(c=b("React")).useCallback,h=c.useContext,i=c.useEffect,j=c.useMemo,k=c.useRef,l=b("relay-runtime").RelayProfiler,m="Interaction Start",n=["root"],o=new WeakSet();function p(a,c){c=c+"_start";b("CometHeroLogging").markStart(a,c)}function q(a,c,d,e,f){d=d+"_start";b("CometHeroLogging").markEnd(a,c,[].concat(e),"PlaceholderWait","Placeholder Wait: "+(f!=null?f:"No Promises"),d)}function r(a,c,d,e,f,g){b("CometHeroLogging").markEnd(a,c,f,"Relay","Relay("+e+(g?",Network":"")+")","Relay_"+d+"_"+e,{fetchedFromNetwork:g,queryName:e})}function s(a,c,d,e){b("CometHeroLogging").markStart(c,"Relay_"+d+"_"+e)}function t(a,c,d,e,f){if(f==null)return function(){};var g=b("CometHeroLogging").getSimpleUUID();s(a,c,g,f.queryName);return function(e){e=!f.usedCache&&!f.usedPrefetcher;e&&f!=null&&b("FBLogger")("comet_infra").addToCategoryKey(f.queryName).warn("Interaction Query '%s' is not using Relay EntryPoints leading to bad performance: https://fburl.com/wiki/3tudp9id",f.queryName);r(a,c,g,f.queryName,d,e)}}function a(a){__p&&__p();var c=a.children,d=a.interactionDesc,e=a.interactionUUID,f=b("useStable")(b("uuid")),r=k(null),s=k(null),u=h(b("HiddenSubtreePassiveContext")),v=d!=null?d:"No Description",w=k({}),x=k(null),y=b("useStable")(b("CometInteractionTracingMetrics").currentInteractionLogger),z=g(function(a,c){s.current!==a&&r.current==null&&!u.getCurrent()&&Object.values(w.current).length===0&&(r.current=b("requestAnimationFrame")(function(){r.current=null,!u.getCurrent()&&s.current!==a&&Object.values(w.current).length===0&&(s.current=a,b("CometHeroLogging").markEnd(y,a,n,"Interaction","Interaction Done: "+c,m))}))},[u,y]),A=g(function(){var a=x.current;a!=null&&z(a.interactionUUID,a.interactionDesc)},[z]),B=g(function(a,c){__p&&__p();var d=x.current;d!=null&&s.current!==d.interactionUUID&&(d!==null&&Object.keys(w.current).forEach(function(a){var c=w.current[a],d=c.thenables;d=b("CometHeroLogging").createThenableDescription(d);q(y,f,a,c.pageletStack,d)}),b("CometHeroLogging").markEnd(y,d.interactionUUID,n,"Interaction","Interaction Aborted ("+c+"): "+d.interactionDesc,m),a!==null&&d.interactionUUID===a.interactionUUID&&b("CometHeroLogging").markStart(a.interactionUUID,m));s.current=null;b("cancelAnimationFrame")(r.current);r.current=null;x.current=a;a!=null&&Object.keys(w.current).forEach(function(a){p(f,a)})},[f,y]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=null;e!=null&&(a={interactionDesc:v,interactionUUID:e});B(a,"New Interaction");e!=null&&z(e,v)},[v,e,B]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){if(e!=null){var a=u.getCurrent(),b=u.subscribe(function(b){a!==b&&(a=b,b?B({interactionDesc:v,interactionUUID:e},"Hidden"):z(e,v))});return function(){return b.remove()}}},[u,e,v,B,z]);i(function(){return function(){B(null,"Unmount")}},[B]);var C=j(function(){__p&&__p();var a={getRelayProfilerContext:function(a){return{wrapPrepareQueryResource:function(b){var c=t.bind(null,y,f,a);l.attachProfileHandler("fetchRelayQuery",c);try{b=b();return b}finally{l.detachProfileHandler("fetchRelayQuery",c)}}}},hold:function(c){var d=b("CometHeroLogging").getSimpleUUID();a.registerPlaceholder(d,c);var e=new(b("Promise"))(function(){});b("PromiseAnnotate").setDisplayName(e,"Hold");a.suspenseCallback(d,c,new Set([e]));return d},logCometHero:function(a,c,d){s.current!==a&&b("CometHeroLogging").markEnd(y,a,[].concat(d),"HeroRendering","Hero Rendering: "+c,m,void 0)},pageletStack:n,registerPlaceholder:function(a,c){var d=w.current[a]==null;if(!d)return;b("cancelAnimationFrame")(r.current);r.current=null;d=new Set();w.current[a]={pageletStack:c,thenables:d};p(f,a)},removePlaceholder:function(a){var c=w.current[a]!=null;if(!c)return;c=w.current[a];delete w.current[a];A();var d=c.thenables;d=b("CometHeroLogging").createThenableDescription(d);q(y,f,a,c.pageletStack,d)},suspenseCallback:function(a,c,d){__p&&__p();var e=w.current[a];e=e==null?void 0:e.thenables;w.current[a]==null&&p(f,a);w.current[a]={pageletStack:c,thenables:d};d.forEach(function(a){if(!o.has(a)){var d;o.add(a);var e=(d=b("PromiseAnnotate").getDisplayName(a))!=null?d:"Promise",g=b("CometHeroLogging").getSimpleUUID();b("CometHeroLogging").markStart(f,g);a.then(function(){b("CometHeroLogging").markEnd(y,f,c,"SuspensePromise","Promise: "+e,g)})}});e=b("CometHeroLogging").createThenableDescription(e);d=b("CometHeroLogging").createThenableDescription(d);d!==e&&(e!=null&&(q(y,f,a,c,e),p(f,a)))},unhold:function(b){a.removePlaceholder(b)}};return a},[y,f,A]);a=j(function(){return C.getRelayProfilerContext(C.pageletStack)},[C]);return b("React").createElement(b("CometHeroInteractionContext").Context.Provider,{value:C},b("React").createElement(b("CometHeroInteractionIDContext").Provider,{value:e},b("React").createElement(b("relay-experimental/ProfilerContext").Provider,{value:a},c)))}e.exports=a}),null);