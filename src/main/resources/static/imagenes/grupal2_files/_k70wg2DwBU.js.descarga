if (self.CavalryLogger) { CavalryLogger.start_js(["iyAGz"]); }

__d("wrapNullableForReact",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a;else return void 0}e.exports=a}),null);
__d("MessengerGraphQLTypeaheadHighlighter",["Keys","MessengerTypeaheadUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getNextHighlightedEntry:function(a,c,d,e){__p&&__p();var f=[];b("MessengerTypeaheadUtils").getEntryOrder(d).forEach(function(a){return f.push.apply(f,c.filter(function(c){return b("MessengerTypeaheadUtils").areSectionsEqual(c.getType(),a)}))});if(!e){if(f.length===0)return null;if(a===b("Keys").DOWN){d=f[0];return d.getType()==="search"&&f.length>1?f[1]:d}return a===b("Keys").UP?f[f.length-1]:null}var g=e.getUniqueID();d=f.findIndex(function(a){return a.getUniqueID()===g});if(d===-1)return null;a===b("Keys").DOWN?(d+=1,d>=f.length&&(d=0)):a===b("Keys").UP&&(d-=1,d<0&&(d=f.length-1));return f[d]}};e.exports=a}),null);
__d("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2339215389425518"};b.getQueryID=function(){return"339708329890231"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerNewGroupParticipantSuggestionLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){__p&&__p();function a(a,c){this.entriesPromise=null,this.orderedFriendEntries=null,this.alreadyParticipatingIDs=null,this.shouldRefetch=!1,this.cursor=null,this.threadFBID=a,this.alreadyParticipatingIDs=c,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){__p&&__p();var c=this;if(this.orderedFriendEntries!==null&&!this.shouldRefetch){a(this.orderedFriendEntries);return}if(this.entriesPromise===null||this.shouldRefetch){var d=this.alreadyParticipatingIDs?this.alreadyParticipatingIDs.toArray():null;d=b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getURI({original_participant_ids:d,count:50});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload().data}).then(function(a){var d=a.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(d);c.orderedFriendEntries=d;d=(d=a)!=null?(d=d.viewer)!=null?(d=d.messenger_contextual_ranked_users)!=null?(d=d.page_info)!=null?d.has_next_page:d:d:d:d;d&&(c.cursor=a.viewer.messenger_contextual_ranked_users.page_info.end_cursor)})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.orderedFriendEntries),c.loadMoreFriends(),c.shouldRefetch=!1},b("emptyFunction"))};c.loadMoreFriends=function(){__p&&__p();var a=this;if(this.cursor==null)return;var c=this.cursor;this.cursor=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getLegacyURI({cursor:c})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(c){a.callbackManager.addLocalEntries(c.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.participantsSame=function(a){return this.twoIDsListEquals(this.alreadyParticipatingIDs,a)};c.twoIDsListEquals=function(a,b){return a?b.size!==a.size?!1:b.isSuperset(a):b.size==0};c.setRefetchAndRefreshData=function(a){this.shouldRefetch=!0,this.alreadyParticipatingIDs=a};c.isBootstrapped=function(a){return this.orderedFriendEntries!==null&&this.participantsSame(a)};return a}();a=function(){__p&&__p();a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);!d?(d=new g(a,b),this.threadFBIDToCacheMap.set(a,d)):d.participantsSame(b)||d.setRefetchAndRefreshData(b);d.onEntriesLoaded(c)};b.search=function(a,b,c,d){var e=this.threadFBIDToCacheMap.get(a);!e?(e=new g(a,b),this.threadFBIDToCacheMap.set(a,e)):e.participantsSame(b)||e.setRefetchAndRefreshData(b);e.search(c,d)};b.isBootstrapped=function(a,b){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped(b):!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2046569042080039"};b.getQueryID=function(){return"2118248735074331"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomWithAssocObjectAudienceLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerRoomWithAssocObjectAudienceWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){__p&&__p();function a(a){this.entriesPromise=null,this.audienceEntries=null,this.threadFBID=a,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){__p&&__p();var c=this;if(this.audienceEntries!==null){a(this.audienceEntries,!0);return}if(this.entriesPromise===null){var d=b("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery").getURI({thread_fbid:this.threadFBID,first:30});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){a=a.data.message_thread.messaging_audience_list.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(a);c.audienceEntries=a})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.audienceEntries,!0)},b("emptyFunction"))};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.isBootstrapped=function(){return this.audienceEntries!==null};return a}();a=function(){__p&&__p();a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b){var c=this.threadFBIDToCacheMap.get(a);c||(c=new g(a),this.threadFBIDToCacheMap.set(a,c));c.onEntriesLoaded(b)};b.search=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);d||(d=new g(a),this.threadFBIDToCacheMap.set(a,d));d.search(b,c)};b.isBootstrapped=function(a){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped():!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MNPlatformAttributionTags",[],(function(a,b,c,d,e,f){e.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGERDOTCOM:"messengerdotcom",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};return b}var d=c.prototype;d.getState=function(){return this.$MessengerAttributionTagsStore1};d.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=a.messagingTags;this.$MessengerAttributionTagsStore1.threadID=a.threadID;this.emitChange();break;case b("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MNPlatformTagsDataManager",["MessengerActions","MessengerAttributionTagsStore","MessengerDiscoveryEntryPointsLoggingHelper","MNPlatformAttributionTags"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={getTags:function(a){__p&&__p();a===void 0&&(a=null);var c=null,d=null;switch(a){case"source:pages:message_shortlink":c=b("MNPlatformAttributionTags").M_DOT_ME;break;case"source:messenger:web":c=b("MNPlatformAttributionTags").MESSENGER_WEB;break;case"source:messenger:web_search":c=b("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;d=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:web_search"]);break;case"source:discovery:customer_chat_plugin":c=b("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;case"source:pages:page_plugin_message":c=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr(["messengerdotcom:pages_plugin"]);break;default:c="";break}a=[c];d!==null&&a.push(d);return a},updateThreadTabAfterSelectThread:function(a,c){a===void 0&&(a=null);c===void 0&&(c=null);a=this.getTags(a);b("MessengerActions").changeThreadTag(a,c)},hasThreadTags:function(a){var c=b("MessengerAttributionTagsStore").getState();return!!(c.messagingTags&&a&&c.threadID&&c.threadID.toString()===a)},getThreadTags:function(){var a=b("MessengerAttributionTagsStore").getState();return a.messagingTags}}}),null);
__d("MessengerPaymentFriendsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1959479940789272"};b.getQueryID=function(){return"2171073576453933"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPaymentFriendsLocalCache",["AsyncRequest","MessengerGraphQLTypeaheadAdapter","MessengerPaymentFriendsQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j={onEntriesLoaded:function(a){__p&&__p();if(i){a(i);return}if(!h){var c=b("MessengerPaymentFriendsQueryWebGraphQLQuery").getURI({first:50});h=new(b("AsyncRequest"))(c).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){var c=a.data.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});g.addLocalEntries(c);i=c;a.data.viewer.all_friends.page_info.end_cursor})}b("promiseDone")(h,function(){a(i)},b("emptyFunction"))},search:function(a,b){j.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return i!==null}};e.exports=j}),null);
__d("MessengerSearchQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2189148087863081"};b.getQueryID=function(){return"2343018689305473"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchSeeAllQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2765614876786361"};b.getQueryID=function(){return"350794689172284"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerGroupSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2950938174931326"};b.getQueryID=function(){return"666334973823993"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerMessageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2706854202719826"};b.getQueryID=function(){return"332444434106998"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2230378867058421"};b.getQueryID=function(){return"419711615545533"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerProfileSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2530922320303835"};b.getQueryID=function(){return"1187203711467179"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2239687859487185"};b.getQueryID=function(){return"398906294161848"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchWebGraphQLFetcherUtils",["CurrentUser","MessengerGroupSearchResultsQueryWebGraphQLQuery","MessengerMessageSearchResultsQueryWebGraphQLQuery","MessengerPageSearchResultsQueryWebGraphQLQuery","MessengerProfileSearchResultsQueryWebGraphQLQuery","MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={formSearchRequests:function(a,c,d){__p&&__p();var e={profiles:[],pages:[],rooms:[],messages:[]},f=b("CurrentUser").isWorkUser()&&b("gkx")("903262")?"workchat":"web_messenger_composer";a.forEach(function(a){__p&&__p();switch(a){case"users":a=Math.floor(Math.random()*65536);e.profiles.push(new(b("MessengerProfileSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,can_viewer_send_money:d.canViewerSendMoneyFilter,session:a.toString(),exclude_ids:d.localEntryIDs,context:f}));break;case"groups":e.profiles.push(new(b("MessengerGroupSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.groupLimit,exclude_ids:d.localEntryIDs,context:f}));break;case"messages":e.messages.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.messageLimit,exclude_ids:[],context:f}));break;case"pages":e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!0,include_games:!0,internal_bot:!1,vc_endpoint:!1,context:f}));d.shouldQueryInternalBot===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!0,vc_endpoint:!1,context:f}));d.shouldQueryVCEndpoint===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!1,vc_endpoint:!0,context:f}));break;case"rooms":d.threadFBID!=null&&e.rooms.push(new(b("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,thread_fbid:d.threadFBID}))}});return e},formMSQMessageSearchRequest:function(a,c){var d=[];d.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:a,result_limit:c,exclude_ids:[],context:"web_messenger_composer"}));return d}};e.exports=a}),null);
__d("MessengerUniversalSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a={END:"end",IMPRESSIONS:"impressions",QUERY_CHANGED:"query_changed",REENTERED:"reentered",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start"};b={FIRST:"first",SEE_ALL:"see_all"};c={USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",COWORKER:"coworker",MESSAGE:"message",OTHER:"other"};d={MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"};f=Object.freeze({INBOX:"inbox",SIDEBAR:"sidebar"});var g={NULL_STATE:"null_state",TYPEAHEAD:"typeahead"},h={LOCAL:"local",SERVER:"server",SERVER_XCONTROLLER:"server_xcontroller",LOCAL_AND_SERVER:"local_and_server",SERVER_USERS_GROUPS:"server_users_groups",SERVER_PAGES:"server_pages",SERVER_ROOMS:"server_rooms"},i={FAILED:"failed",FINISHED:"finished"},j={LOCAL:"local",SERVER:"server"},k={END_ACTION:"end_action"},l=Object.freeze({ABANDON:"abandon",RESULT_SELECTED:"result_selected",MESSAGE_SEARCH:"message_search",ENTER_INTEGRATED_MESSAGE_SEARCH:"enter_integrated_message_search",SEND:"send",CALL:"call"});e.exports={NAME:"MESSENGER_UNIVERSAL_SEARCH_FUNNEL",TYPE:"UNIVERSAL",END_ACTIONS:l,END_REASONS:k,ENTRY_SURFACES:f,EVENTS:a,INTERFACES:d,QUERY_PROGRESS:i,RESULT_PAGES:b,RESULT_SURFACES:g,RESULT_TYPES:c,SOURCES:h,UI_SECTIONS:j}}),null);
__d("MessengerSearchWebGraphQLFetcher",["Promise","requireCond","Bootloader","CurrentUser","MercuryConfig","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLTypeaheadAdapter","MessengerSearchQueryWebGraphQLQuery","MessengerSearchSeeAllQueryWebGraphQLQuery","MessengerSearchWebGraphQLFetcherUtils","MessengerSecondarySearchFunnelConstants","MessengerUniversalSearchFunnelLoggerConstants","PromiseUtil","WebGraphQL","cr:998965","compactArray","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,h=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,i=b("MercuryConfig").SearchMorePeople?b("MercuryConfig").SearchMorePeople:2,j=5,k=3;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$7="",this.$1=0,this.$2=0,this.$5=0,this.$6=a,this.$7=b}var c=a.prototype;c.fetchEntries=function(a,c,d,e,f){__p&&__p();var g=this;c=b("MessengerSearchWebGraphQLFetcherUtils").formSearchRequests(c,a,d);var h=c.pages,i=c.profiles,j=c.rooms,k=c.messages;if(h.length>0){this.$8("pages",a);this.$2=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){return g.$9(b,a,e)},function(b){return g.$10(b,a,f)})()}if(i.length>0){this.$8("users_groups",a);this.$1=0;c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){g.$11(b,a,e)},function(b){return g.$12(b,a,f)})()}if(j.length>0){this.$8("rooms",a);this.$5=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$13(b,a,e)},function(b){return g.$14(b,a,f)})()}c=b("gkx")("975043");if(k.length>0&&c){this.$8("messages",a);this.$3=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$15(b,a,e)},function(b){return g.$16(b,a,f)})()}};c.fetchMSQEntries=function(a,c,d,e){__p&&__p();var f=this;if(c>0){this.$3=0;var g=b("MessengerSearchWebGraphQLFetcherUtils").formMSQMessageSearchRequest(a,c);this.$8("messages",a);c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){f.$15(b,a,d)},function(b){return f.$16(b,a,e)})()}this.$4=0;var h=[];h.push(new(b("MessengerSearchQueryWebGraphQLQuery"))({query:a}));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$17(b,a,d)},function(b){return f.$18(b,a,e)})()};c.fetchMSSAQEntries=function(a,c,d,e,f,g){__p&&__p();var h=this;g===void 0&&(g=[]);this.$4=0;var i=[];switch(c){case"friend":case"non_friend":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"USER",limit:d}]}));break;case"thread":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"GROUP",limit:d}]}));break;case"page":i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"PAGE",limit:d}]}));break}c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return h.$17(b,a,e)},function(b){return h.$18(b,a,f)})()};c.$17=function(a,c,d){__p&&__p();var e=this;a=a[0];a=a==null?void 0:(a=a.messenger_search)==null?void 0:(a=a.result_modules)==null?void 0:(a=a.nodes)==null?void 0:(a=a[0])==null?void 0:(a=a.search_results)==null?void 0:a.edges;var f=[],g=0;a!=null&&a.forEach(function(a){__p&&__p();if(a.node&&a.node.__typename){var c=a.node.__typename;if(c==="User"){var d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}if(c==="MessengerViewerGroupThread"){d=b("CurrentUser").getID();d=b("MessengerGraphQLTypeaheadAdapter").convertMSQGroupToEntry(a.node,g,d);d&&f.push(d);g++}if(c==="Page"){d=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));d&&f.push(d)}}});d(f,"singleServerQuery");this.$20("single_server_query",c,f)};c.fetchWorkChatSingleQueryEntries=function(a,c,d,e){__p&&__p();var f=this;if(b("cr:998965")==null)return;var g=[];g.push(b("cr:998965").formSearchRequests(a,c));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$21(b,a,d)},function(b){return f.$22(b,a,e)})()};c.$21=function(a,c,d){__p&&__p();var e=this,f;a=a[0];if(this.$6()!==c)return;f=a==null?void 0:(f=a.entities_named)==null?void 0:f.user_group_results;var g=[],h=!1;h=!0;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f.edges;f.map(function(a,c){var d=a.node;if(d!=null&&d.is_group_thread!=null){c=b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(d,c);c&&g.push(c)}else{c=b("MessengerGraphQLTypeaheadAdapter").convertWorkChatProfileToEntry(d,h?a.subtext:null);c&&g.push(c)}})}f=a==null?void 0:(f=a.entities_named)==null?void 0:f.bot_results;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f==null?void 0:f.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}a=a==null?void 0:(f=a.entities_named)==null?void 0:f.vc_results;if(a!=null&&(a==null?void 0:a.edges)!=null&&(a==null?void 0:a.edges.length)>0){f=a==null?void 0:a.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}d(g,"singleServerQuery");this.$20("wc_single_server_query",c,g)};c.$15=function(a,c,d){__p&&__p();a=a[0];if(this.$6()!==c)return;a=a==null?void 0:(a=a.entities_named)==null?void 0:(a=a.search_results)==null?void 0:a.edges;var e=[];a!=null&&a.forEach(function(a){a=b("MessengerGraphQLTypeaheadAdapter").convertMessageToEntry(a.node);a&&e.push(a)});d(e,"messages");this.$20("messages",c,e)};c.$13=function(a,c,d){if(this.$6()!==c)return;a=(a=a[0])!=null?(a=a.message_thread)!=null?(a=a.messaging_audience_list)!=null?a.nodes:a:a:a;if(a){a=b("compactArray")(a.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a)}));d(a,"usersGroups");this.$20("rooms",c,a)}};c.$11=function(a,c,d){__p&&__p();if(this.$6()!==c)return;var e=[],f=[],g=!1;g=!0;for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;j=(j=j)!=null?(j=j.entities_named)!=null?(j=j.search_results)!=null?j.edges:j:j:j;j&&j.length>0&&j[0].node&&(j[0].node.is_group_thread!=null?e=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}):j[0].node.is_messenger_user!=null&&(f=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,g===!0?a.subtext:null)}),f=this.$23(b("compactArray")(f))))}j=b("compactArray")(f.concat(e));d(j,"usersGroups");this.$20("users_groups",c,j)};c.$23=function(a){__p&&__p();var b=[],c=[],d=[];for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(!g)continue;g.getType()==="friend"&&b.length<j?b.push(g):g.getType()==="non_friend"&&d.length<i?d.push(g):g.getType()==="fb4c"&&c.length<8&&c.push(g)}return b.concat(c,d)};c.$9=function(a,c,d){__p&&__p();var e=this;if(this.$6()!==c)return;var f=[];for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;i=(i=i)!=null?(i=i.entities_named)!=null?(i=i.search_results)!=null?i.edges:i:i:i;i=i?i.map(function(a){a=a.node;return b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a,e.$19(a))}):[];f=f.concat(b("compactArray")(i.slice(0,5)))}d(f,"pages");this.$20("pages",c,f)};c.$19=function(a){if(!a||!a.category_type)return"page";if(a.category_type==="WORKPLACE_BOT")return"internal_bot_page";else if(a.category_type==="MEETING_ROOM")return"meeting_room_page";return"page"};c.$12=function(a,b,c){if(b===this.$6()){if(this.$1<k){this.$1+=1;return!0}c(a,"usersGroups")}return!1};c.$10=function(a,b,c){if(b===this.$6()){if(this.$2<k){this.$2+=1;return!0}c(a,"pages")}return!1};c.$16=function(a,b,c){if(b===this.$6()){if(this.$3<k){this.$3+=1;return!0}c(a,"messages")}return!1};c.$14=function(a,b,c){if(b===this.$6()){if(this.$5<k){this.$5+=1;return!0}c(a,"rooms")}return!1};c.$18=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$22=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$24=function(a){__p&&__p();var c="";switch(a){case"users_groups":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_USERS_GROUPS;break;case"pages":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_PAGES;break;case"rooms":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_ROOMS;break;default:c=""}return c};c.$8=function(a,c){var d=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){var b=d.$24(a);e.logSourceStarted(c,b)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var e=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_STARTED,query:c,source:e,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};c.$20=function(a,c,d){__p&&__p();var e=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(g){var f=e.$24(a);g.logSourceEnded(c,f,d.length,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,e.$6()===c)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var f=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,query:c,source:f,ids:d.map(function(a){return a.getUniqueID()}),status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};return a}();e.exports=a}),null);
__d("MessengerFriendsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1720594534660350"};b.getQueryID=function(){return"1852062858177546"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("TopMessengerFriendsAndGroupsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1978892428852690"};b.getQueryID=function(){return"127838424757019"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerTypeaheadLocalCache",["AsyncRequest","MessengerConfig","MessengerFriendsWebGraphQLQuery","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","TopMessengerFriendsAndGroupsWebGraphQLQuery","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j=null,k=null;function l(){if(b("MessengerConfig").BootstrapTypeaheadFromBuddylist||!j)return;var a=j;j=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerFriendsWebGraphQLQuery").getLegacyURI({cursor:a})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){g.addLocalEntries(a.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})}var m={onEntriesLoaded:function(a){if(h!==null&&i!==null){a(h,i,!1);return}k===null&&(k=m.fetchEntriesFromServer());b("promiseDone")(k,function(){a(h,i,!0),l()},function(a){throw a})},fetchEntriesFromServer:function(){var a=b("MessengerConfig").BootstrapTypeaheadFromBuddylist;a=b("TopMessengerFriendsAndGroupsWebGraphQLQuery").getLegacyURI({use_buddylist:a,first:100});a=new(b("AsyncRequest"))(a).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){return m.handlePayload(a)});return a},handlePayload:function(a){__p&&__p();var c=b("MessengerConfig").BootstrapTypeaheadFromBuddylist,d=(c?a.viewer.chat_buddylist:a.viewer.all_friends.edges).map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(c?a.represented_profile:a.node)}).filter(function(a){if(a===null)return!1;a=a.getAuxiliaryData();a=a&&a.isMemorializedUser;return!a}),e=a.viewer.message_threads.edges.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}).filter(function(a){return a!==null});g.addLocalEntries(d);g.addLocalEntries(e);h=d;i=e;a.viewer.all_friends&&a.viewer.all_friends.page_info&&a.viewer.all_friends.page_info.has_next_page&&(j=a.viewer.all_friends.page_info.end_cursor)},search:function(a,b){m.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return h!==null&&i!==null}};e.exports=m}),null);
__d("MessengerTypeaheadResultView.react",["cx","Bootloader","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerSecondarySearchFunnelConstants","MessengerTypeaheadUtils","React","SearchableEntry","immutable","joinClasses","qex","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}if(!d.$1)return;c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.$1,d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$3=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=this.$2(this.props)};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.$1})};d.UNSAFE_componentWillUpdate=function(a){this.$1=this.$2(a)};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){var a=this.$1;if(!a)return null;var c=["search","friend","fb4c","message","thread","page","non_friend","meeting_room_page","internal_bot_page","game"];a=b("MessengerTypeaheadUtils").buildListSections(a,this.props.queryString,c);c=!1;this.props.isTokenizer!==null&&(c=b("qex")._("1063079")&&!this.props.isTokenizer&&this.props.queryString.length>1);return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:a,onHighlight:this.$3,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,showSeeAll:(a=c)!=null?a:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};d.$2=function(a){var c=a.localEntries,d={};c.forEach(function(a){d[a.getUniqueID()]=!0});var e=b("MessengerTypeaheadUtils").sortEntries(this.$4(a,d),a.queryString),f=null;f=c.concat(e).filter(function(b){return!a.selectedEntryIDs.contains(b.getUniqueID())}).slice(0,h);this.$5(a.queryString,f,a.localEntryIDs);return f};d.$4=function(a,b){var c=a.customResultFilterFn||function(){return!0};return a.serverResults.filter(function(a){return a&&!b[a.getUniqueID()]&&c(a)})};d.$5=function(a,c,d){__p&&__p();this.props.isTokenizer?b("Bootloader").loadModules(["MessengerBootloadedSecondarySearchLogger","MessengerSearchLoggerUtil"],function(d,e){var f=c.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});d.logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:a,entries:f,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})},"MessengerTypeaheadResultView.react"):b("Bootloader").loadModules(["MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(e,f,g){var h=b("immutable").OrderedMap();c.forEach(function(a){var b=a.getUniqueID(),c=b.split(":").pop();a={result_fbid:c,result_type:e.getLoggingTypeFromMercuryType(a.getType()),rank_section:g.SOURCES.LOCAL_AND_SERVER,data_source:[d.includes(c)?g.SOURCES.LOCAL:g.SOURCES.LOCAL_AND_SERVER]};h=h.set(b,a)});f.logImpressions(h,a,g.RESULT_SURFACES.TYPEAHEAD,g.SOURCES.LOCAL_AND_SERVER)},"MessengerTypeaheadResultView.react")};return c}(b("React").Component);c.propTypes={controlleeID:a.string.isRequired,canViewerSendMoneyFilter:a.bool,className:a.string.isRequired,localEntries:a.arrayOf(a.instanceOf(b("SearchableEntry"))).isRequired,localEntryIDs:a.arrayOf(a.string.isRequired).isRequired,hasHoverState:a.bool.isRequired,highlightedEntry:a.object,onMount:a.func.isRequired,onNextHighlighted:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSeeAllSelect:a.func,onSelect:a.func.isRequired,onSelectHighlighted:a.func.isRequired,onUnmount:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,serverResults:a.arrayOf(a.instanceOf(b("SearchableEntry"))).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryPages:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,viewer:a.string.isRequired,forGroup:a.bool,rowComponent:a.func,customResultFilterFn:a.func};c.defaultProps={controlleeID:"",className:"",customResultFilterFn:function(){return!0}};e.exports=c}),null);
__d("MessengerTypeaheadTopFriendsView.react",["cx","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerTypeaheadUtils","React","immutable","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.props.entries.toArray(),d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$1=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.props.hasHoverState&&(this.props.entries.size>0&&this.props.onNextHighlighted(this.props.entries.first()))};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.props.entries.toArray()})};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!!this.props.queryString,listSections:b("MessengerTypeaheadUtils").buildListSections(this.props.entries.toArray(),this.props.queryString),onHighlight:this.$1,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};return c}(b("React").Component);c.propTypes={controlleeID:a.string.isRequired,className:a.string.isRequired,entries:a.instanceOf(b("immutable").List).isRequired,hasHoverState:a.bool.isRequired,highlightedEntry:a.object,onNextHighlighted:a.func.isRequired,onMount:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSelect:a.func.isRequired,onSelectHighlighted:a.func.isRequired,onUnmount:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,viewer:a.string.isRequired,rowComponent:a.func};c.defaultProps={controlleeID:"",className:""};e.exports=c}),null);
__d("MessengerGraphQLTypeaheadView.react",["cx","fbt","Bootloader","CurrentUser","ImageBlock.react","MercuryConfig","MessengerBootloadedSecondarySearchLogger","MessengerNewGroupParticipantSuggestionLocalCacheManager","MessengerPaymentFriendsLocalCache","MessengerRoomWithAssocObjectAudienceLocalCacheManager","MessengerSearchWebGraphQLFetcher","MessengerSecondarySearchFunnelConstants","MessengerSpinner.react","MessengerTypeaheadLocalCache","MessengerTypeaheadResultView.react","MessengerTypeaheadTopFriendsView.react","MessengerTypeaheadUtils","MessengerUniversalSearchFunnelLoggerConstants","React","createCancelableFunction","debounce","immutable","gkx","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,j=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,k=8,l=10;c=100;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={localEntries:b("immutable").List(),queryCompleteStatus:{usersGroups:!1,pages:!1},serverResults:[],highlightedEntry:null},d.$1=null,d.$2=null,d.$3=null,d.$4=null,d.$5=!0,d.$6=b("MessengerRoomWithAssocObjectAudienceLocalCacheManager").get(),d.$7=b("MessengerNewGroupParticipantSuggestionLocalCacheManager").get(),d.$8=!1,d.$9=null,d.$10=0,d.$13=function(a,c,e,f,g,h){__p&&__p();if(d.props.queryString.length<2)return;d.$5&&d.setState({serverResults:[]});c=d.state.localEntries.toArray().filter(function(a){return a.getType()!=="search"}).map(function(a){return a.getUniqueID()});var i=[];e||i.push("groups");f||i.push("pages");d.props.enableMessageSearch&&i.push("messages");g===null?i.push("users"):i.push("rooms");e={userLimit:l,messageLimit:3,groupLimit:b("MercuryConfig").MaxThreadResults,pageLimit:5,getQueryString:d.$12,canViewerSendMoneyFilter:h,localEntryIDs:c,threadFBID:g,shouldQueryInternalBot:d.props.shouldQueryInternalBot,shouldQueryVCEndpoint:d.props.shouldQueryVCEndpoint};f=b("qex")._("971247");h=b("CurrentUser").isWorkUser()&&b("gkx")("991794");f&&d.$9!==null?d.$9.fetchMSQEntries(a,d.props.isTokenizer?0:e.messageLimit,d.$29,d.$30):h&&d.$9!=null?d.$9.fetchWorkChatSingleQueryEntries(a,e,d.$29,d.$30):d.$9!==null&&d.$9.fetchEntries(a,i,e,d.$29,d.$30)},d.$29=function(a,b){if(d.$5){d.setState(function(c){return{serverResults:c.serverResults.concat(a),queryCompleteStatus:b==="singleServerQuery"?Object.assign({},c.queryCompleteStatus,{usersGroups:!0},{pages:!0}):Object.assign({},c.queryCompleteStatus,(c={},c[b]=!0,c))}});return}},d.$30=function(a,b){d.setState(function(a){return{queryCompleteStatus:Object.assign({},a.queryCompleteStatus,(a={},a[b]=!0,a))}})},d.$12=function(){return d.props.queryString},d.$20=function(a,b){d.$3=a,d.$4=b,d.$14()},d.$23=function(){d.$3=null,d.$4=null},d.$21=function(a){d.setState({highlightedEntry:a})},d.$22=function(a){d.state.highlightedEntry&&d.props.onSelect(d.state.highlightedEntry,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$10=k;this.$11();var c=this.props.isTokenizer?i:j;this.$9=new(b("MessengerSearchWebGraphQLFetcher"))(function(){return a.$12()},c);this.$2=b("debounce")(this.$13,150,this,!0)};d.componentDidUpdate=function(a){this.props!==a&&(this.props.queryString!==a.queryString&&this.$14())};d.$14=function(){this.setState({highlightedEntry:null})};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this;if(!a.queryString)this.setState({highlightedEntry:null}),this.$11();else if(a.queryString!==this.props.queryString){this.$8=!0;this.setState({queryCompleteStatus:{userGroupQueryFinished:!1,pagesQueryFinished:!1},serverResults:[]});var d=a.roomAssociatedObject&&a.roomAssociatedObject.privacy_mode;this.$2&&this.$2(a.queryString,b("MercuryConfig").MaxThreadResults,a.excludeGroups,a.excludePages,d===0?a.threadFBID:null,a.canViewerSendMoneyFilter);if(d===0){this.$15(a);return}if(this.props.canViewerSendMoneyFilter){this.$16(a);return}if(this.props.includeExistingParticipantIDs){this.$17(a);return}b("MessengerTypeaheadLocalCache").search(a.queryString,function(d,e){__p&&__p();if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);var f=c.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(e):null;f&&d.unshift(f);f=b("immutable").List(d).filter(function(a){if(c.props.excludeGroups&&a.getType()==="thread")return!1;return c.props.excludePages&&a.getType()==="page"?!1:!0});c.$18(f,e);c.$19(f,e);c.setState({localEntries:f})}})}};d.shouldComponentUpdate=function(a,b){return a.queryString!==this.props.queryString||a.isFocused!==this.props.isFocused||a.excludeGroups!==this.props.excludeGroups||a.excludePages!==this.props.excludePages||b.localEntries!==this.state.localEntries||b.queryCompleteStatus!==this.state.queryCompleteStatus||b.highlightedEntry!==this.state.highlightedEntry};d.componentWillUnmount=function(){this.$1&&this.$1.cancel(),this.$2&&this.$2.reset(),this.$5=!1};d.render=function(){if(!this.props.isFocused&&!this.props.queryString||!b("MessengerTypeaheadLocalCache").isBootstrapped()&&!this.$6.isBootstrapped(this.props.threadFBID)&&!b("MessengerPaymentFriendsLocalCache").isBootstrapped()&&!this.$7.isBootstrapped(this.props.threadFBID,this.props.originalEntryIDs))if(b("gkx")("678607"))return b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("Buscando...")));else return null;if(!this.props.queryString)return b("React").createElement(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.state.localEntries,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onMount:this.$20,onNextHighlighted:this.$21,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent});var a=this.state.queryCompleteStatus.usersGroups&&(this.props.excludePages||this.state.queryCompleteStatus.pages),c=!b("gkx")("1053071")&&this.props.queryString.length<2;return b("React").createElement("div",null,this.state.queryCompleteStatus.usersGroups||c?this.$24():this.$25(),this.state.queryCompleteStatus.usersGroups&&!a?this.$26():null)};d.$25=function(){var a=this.state.localEntries.slice(0,this.$10);return b("React").createElement(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.$27(a,this.props.queryString),hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onNextHighlighted:this.$21,onMount:this.$20,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};d.$26=function(){return b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("Buscando...")))};d.$24=function(a){var c=this.$28(),d=this.state.localEntries.slice(0,this.$10);return b("React").createElement(b("MessengerTypeaheadResultView.react"),babelHelpers["extends"]({},a,{className:this.props.typeaheadViewClassName,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,isTokenizer:this.props.isTokenizer,localEntries:d.toArray(),onMount:this.$20,onNextHighlighted:this.$21,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,onSelectHighlighted:this.$22,onUnmount:this.$23,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,serverResults:this.state.serverResults,viewer:this.props.viewer,rowComponent:this.props.rowComponent},c))};d.$27=function(a,b){var c=this;b=a.filter(function(a){return!c.props.selectedEntryIDs.contains(a.getUniqueID())});return b};d.onKeyDown=function(a,b){this.$3&&this.$3(a,b)};d.$15=function(a){var c=this;this.$6.search(a.threadFBID,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$31=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){c=c.slice(0,30);a.setState({localEntries:b("immutable").List(c)})});this.$6.onEntriesLoaded(this.props.threadFBID,function(b){a.$1&&a.$1(b),a.$1=null})};d.$17=function(a){var c=this;this.$7.search(a.threadFBID,a.originalEntryIDs,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$32=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c.slice(0,50))})});this.$7.onEntriesLoaded(this.props.threadFBID,this.props.originalEntryIDs,function(b){a.$1&&a.$1(b),a.$1=null})};d.$16=function(a){var c=this;b("MessengerPaymentFriendsLocalCache").search(a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$33=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c)})});b("MessengerPaymentFriendsLocalCache").onEntriesLoaded(function(b){a.$1&&a.$1(b),a.$1=null})};d.$11=function(){__p&&__p();var a=this,c=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(c===0){this.$31();return}if(this.props.canViewerSendMoneyFilter){this.$33();return}if(this.props.includeExistingParticipantIDs){this.$32();return}this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c,d,e){c=c.slice(0,50);a.props.excludeGroups||(c=c.concat(d));if(!e||!a.props.queryString){d=a.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(a.props.queryString):null;d&&c.unshift(d);a.props.queryString===""&&a.$34(c);a.setState({localEntries:b("immutable").List(c)})}});b("MessengerTypeaheadLocalCache").onEntriesLoaded(function(b,c,d){a.$1&&a.$1(b,c,d),a.$1=null})};d.$28=function(){var a=this.props.canViewerSendMoneyFilter,c=this.state.localEntries.toArray();c=c.filter(function(a){return a.getType()!=="search"}).map(function(a){return a.getUniqueID()});var d=b("MercuryConfig").MaxThreadResults,e=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;e=e===0;var f=!this.props.excludeGroups&&this.props.queryString&&this.props.queryString.length>1&&!e,g=!this.props.excludeGroups&&c.length>0&&!e,h=!this.props.excludeGroups&&(!g||b("CurrentUser").isEmployee())&&!e,i=!1,j=!this.props.excludePages&&!e,k=this.props.shouldQueryVCEndpoint&&(b("CurrentUser").isEmployee()||b("CurrentUser").isWorkUser())&&!e,l=this.props.shouldQueryInternalBot&&b("CurrentUser").isEmployee()&&b("CurrentUser").isWorkUser()&&!e,m=e,n=this.props.threadFBID;return{queryString:this.props.queryString,canViewerSendMoneyFilter:a,localEntryIDs:c,maxThreadResults:d,shouldQueryGroups:i,shouldQueryPages:j,shouldQueryThreadName:f,shouldQueryParticipantIDs:g,shouldQueryParticipantNames:h,shouldQueryVCEndpoint:k,shouldQueryInternalBot:l,shouldQueryRoomsAudience:e,shouldSkipQueryUsers:m,threadFBID:n,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup}};d.$19=function(a,c){__p&&__p();var d=this;this.props.isTokenizer?b("Bootloader").loadModules(["MessengerSearchLoggerUtil"],function(e){if(d.props.queryString===c){var f=a.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER,entries:f})}},"MessengerGraphQLTypeaheadView.react"):b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){if(d.props.queryString===c){var g=b("immutable").OrderedMap();a.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};g=g.set(c,a)});e.logImpressions(g,c)}},"MessengerGraphQLTypeaheadView.react")};d.$34=function(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(b){b.logNullStateImpressions(a,a.length)},"MessengerGraphQLTypeaheadView.react")};d.$18=function(a,c){__p&&__p();var d=this;if(this.props.isTokenizer){var e;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:(e=b("MessengerSecondarySearchFunnelConstants")).EVENTS.SOURCE_ENDED,query:c,ids:a.map(function(a){return a.getUniqueID()}),source:e.SOURCES.LOCAL_CONTACTS,numResults:a.size,status:e.SOURCE_STATUSES.FINISHED,loggingID:e.LOGGING_IDS.M_APP_COMPOSER})}else b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){var g=a;if(d.props.queryString===c){var h=b("immutable").OrderedMap();g.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};h=h.set(c,a)});e.logImpressions(h,c)}},"MessengerGraphQLTypeaheadView.react")};return c}(b("React").Component);d.propTypes={includeExistingParticipantIDs:a.bool,canViewerSendMoneyFilter:a.bool,enableMessageSearch:a.bool.isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,forGroup:a.bool,isFocused:a.bool.isRequired,hasHoverState:a.bool.isRequired,maxEntries:a.number.isRequired,onScrollIntoView:a.func.isRequired,onSeeAllSelect:a.func,onSelect:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,roomAssociatedObject:a.object,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,threadFBID:a.string,typeaheadViewClassName:a.string.isRequired,viewer:a.string.isRequired,rowComponent:a.func,customResultFilterFn:a.func};d.defaultProps={maxEntries:c,typeaheadViewClassName:""};e.exports=d}),null);
__d("MessengerScrollableArea.react",["cx","React","ReactDOM","ScrollableArea.react","Style","UserAgent","clearImmediate","joinClasses","setImmediate","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=20;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=!1;d.$2=null;d.$4=function(){if(d.$1){var a;d.props.onScroll&&(a=d.props).onScroll.apply(a,arguments)}};d.$5=function(){__p&&__p();if(!b("UserAgent").isBrowser("IE"))return;if(!d.refs||!d.refs.scrollable)return;var a=d.refs.scrollable.refs.wrap,c=d.refs.scrollable.refs.body;if(!c||!a)return;c=b("ReactDOM").findDOMNode(c);a=b("ReactDOM").findDOMNode(a);a=a.offsetWidth-a.clientWidth;a>0&&b("Style").set(c,"margin-right",-a+"px")};d.$3=b("throttle")(d.$4,50);return d}var d=c.prototype;d.componentDidMount=function(){this.$2=b("setImmediate")(this.$5),this.$1=!0};d.componentWillUnmount=function(){b("clearImmediate")(this.$2),this.$1=!1};d.render=function(){var a=this.props.needsFastScrollHandler?this.$4:this.$3;return b("React").createElement(b("ScrollableArea.react"),{className:b("joinClasses")("_5f0v",this.props.className),height:this.props.height,onScroll:a,persistent:!0,ref:"scrollable",shadow:!1,tabIndex:this.props.tabIndex,width:this.props.width},this.props.children)};d.getArea=function(){return this.refs.scrollable.getArea()};d.scrollToBottom=function(a){var b=this.getArea();b&&this.scrollToPosition(b.getScrollHeight(),!!a)};d.scrollToTop=function(a){var b=this.getArea();b&&b.scrollToTop(!!a)};d.scrollToPosition=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c={});var d=this.getArea();if(!d)return;d.setScrollTop(a,b,c)};d.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0)};d.isScrolledToBottomWithHeight=function(a){var b=this.getArea();return!b?!1:b.getScrollTop()+b.getClientHeight()+a>=b.getScrollHeight()-h};d.isScrolledToTop=function(){var a=this.getArea();return!a?!0:a.getScrollTop()<=h};d.getScrollTop=function(){var a=this.getArea();return!a?0:a.getScrollTop()};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGraphQLSearchTypeahead.react",["fbt","cx","ix","Bootloader","BootloadOnRender.react","ContextualLayer.react","CurrentUser","Event","Image.react","JSResource","Keys","LazyComponent.react","MercuryIDs","MessengerContentSearchFunnelLoggerConstants","MessengerSearchActions","MessengerUniversalSearchFunnelLoggerConstants","gkx","immutable","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLTypeaheadView.react","MessengerScrollableArea.react","MessengerSpinner.react","MessengerState.bs","MessengerTypeaheadUtils","MNPlatformTagsDataManager","React","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","clearImmediate","emptyFunction","joinClasses","qex","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get();a=b("React").PropTypes;var k=i("86933"),l=30,m=100;c=b("React").createClass({displayName:"MessengerGraphQLSearchTypeahead",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],_input:null,_timer:null,_view:null,propTypes:{includeExistingParticipantIDs:a.bool,canViewerSendMoneyFilter:a.bool,className:a.string.isRequired,context:a.object,enableMessageSearch:a.bool.isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,customResultFilterFn:a.func,forGroup:a.bool,hasHoverState:a.bool.isRequired,hideClearButton:a.bool.isRequired,isMessageSearchMode:a.bool,isFacebookChat:a.bool.isRequired,isFocused:a.bool.isRequired,isTokenizer:a.bool.isRequired,onBackspace:a.func.isRequired,onBlur:a.func.isRequired,onChange:a.func.isRequired,onClear:a.func.isRequired,onClick:a.func.isRequired,onFocus:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSelect:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,placeholder:a.string.isRequired,queryString:a.string,roomAssociatedObject:a.object,scrollableViewClassName:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,tabIndex:a.number,threadFBID:a.string,typeaheadViewClassName:a.string.isRequired,useLayer:a.bool.isRequired,viewer:a.string.isRequired,width:a.number,rowComponent:a.func,searchInputPortalRef:a.instanceOf(HTMLDivElement)},getInitialState:function(){return{gameID:null}},getDefaultProps:function(){var a;return{includeExistingParticipantIDs:!1,canViewerSendMoneyFilter:!1,isFacebookChat:!1,isTokenizer:!1,onBackspace:a=b("emptyFunction"),onChange:a,onClear:a,onClick:a,onScrollIntoView:a,originalEntryIDs:b("immutable").Set(),placeholder:"",scrollableViewClassName:"",selectedEntryIDs:b("immutable").Set(),typeaheadViewClassName:"",useLayer:!1}},componentDidMount:function(){this._timer=b("setImmediate")(this._syncInputWidth)},componentDidUpdate:function(){b("clearImmediate")(this._timer),this._timer=b("setImmediate")(this._syncInputWidth)},componentWillUnmount:function(){b("clearImmediate")(this._timer)},renderLayers:function(){var a=this;if(!this.props.useLayer)return{};var c=null,d=null;this.props.context?c=this.props.context:d=function(){return a._input};return{typeaheadView:b("React").createElement(b("ContextualLayer.react"),{context:c,contextRef:d,position:"below",shown:(this.props.queryString||b("gkx")("678607"))&&this.props.isFocused,shouldSetARIAProperties:!1},this._renderView())}},render:function(){var a=this.props.useLayer?null:this._renderView();return b("React").createElement("div",{className:(this.props.isTokenizer?"":"_1nq2")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vup":"")+(this.props.isTokenizer?" _3mkz":"")},b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_58ah"+(this.props.isMessageSearchMode?" _1a03":"")),onChange:this.props.onChange,onSelect:b("emptyFunction"),tabIndex:null},this._renderInput(),a),b("React").createElement(b("Image.react"),{onMouseDown:this._onClear,className:(this.props.hideClearButton?"hidden_elem":"")+" _2xme",src:k}),b("React").createElement("span",{ref:"textSizeProxy",className:"_58-3","aria-hidden":"true"},this.props.queryString||this.props.placeholder),this._renderGame())},focusInput:function(){this._input&&this._input.focus()},_onClear:function(){this.props.isMessageSearchMode&&this._logClearContentSearch(),this.props.onClear()},_syncInputWidth:function(){if(!this.props.isTokenizer)return;var a=b("ReactDOM").findDOMNode(this.refs.textSizeProxy);a=a?a.offsetWidth:0;if(a===0)return;this._input&&(this._input.style.width=a+"px")},_renderInput:function(){var a=this,c=b("CurrentUser").isWorkUser()&&this.props.searchInputPortalRef!=null?this.props.searchInputPortalRef:null,d=b("React").createElement("label",{className:"_58ak"},b("React").createElement("input",{autoComplete:"off",className:"_58al _7tpc",onBlur:this._handleBlur,onClick:this.props.onClick,onChange:function(){},onFocus:function(b){return a.props.onFocus()},onKeyDown:function(b){return a._handleKeyDown(b)},placeholder:this.props.placeholder,ref:function(b){return a._input=b},spellCheck:!1,tabIndex:this.props.tabIndex,type:"text",value:this.props.queryString,"aria-label":b("CurrentUser").isWorkUser()?g._("Buscar en Work Chat"):g._("Buscar en Messenger")}));if(c!=null)return b("ReactDOM").createPortal(d,c);else return d},_renderGame:function(){return!this.state.gameID?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerGraphQLSearchTypeahead.react"),placeholder:b("React").createElement(b("MessengerSpinner.react"),null),component:b("React").createElement(b("LazyComponent.react"),{initialContextType:"SOLO",initialContextSourceID:null,initialGameID:this.state.gameID,onHide:this._handleHideGame,initialSource:"messenger_search",sourceID:null})})},_renderView:function(){__p&&__p();var a=this;if(!this.props.isFocused)return null;if(!this.props.queryString){var c=b("gkx")("678607")?!1:this.props.isTokenizer&&!this.props.forGroup;if(c)return null}c=this.props.isTokenizer?l:m;c=b("React").createElement(b("MessengerGraphQLTypeaheadView.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,isFocused:this.props.isFocused,isTokenizer:this.props.isTokenizer,hasHoverState:this.props.hasHoverState,maxEntries:c,onScrollIntoView:this._handleScrollIntoView,onSeeAllSelect:this._handleSeeAllSelect,onSelect:this._handleSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,ref:function(b){return a._view=b},roomAssociatedObject:this.props.roomAssociatedObject,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,selectedEntryIDs:this.props.selectedEntryIDs,threadFBID:this.props.threadFBID,typeaheadViewClassName:this.props.typeaheadViewClassName,viewer:this.props.viewer,rowComponent:this.props.rowComponent});if(this.props.isTokenizer)return b("React").createElement(b("MessengerScrollableArea.react"),{className:this.props.scrollableViewClassName,ref:"scrollable",width:this.props.width},c);else return c},_handleScrollIntoView:function(a){if(!a)return;if(!this.props.isTokenizer){this.props.onScrollIntoView(a);return}this.refs.scrollable&&b("MessengerTypeaheadUtils").scrollEntryIntoView(a,this.refs.scrollable)},_getThreadID:function(a,c){b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(a),function(a){return c(a.thread_id)})},_handleSeeAllSelect:function(a,c){c&&c.preventDefault();c=this.props.queryString;var d="search";this._endSearchFunnelStartContentSearchFunnel(c,d,!0);b("MessengerSearchActions").changeQuerySeeAll(c,a);b("MessengerSearchActions").enterSeeAllSearch()},_handleSelect:function(a,c){__p&&__p();c&&c.preventDefault();c=this.props.queryString;var d=a.getType(),e=a.getUniqueID().split(":").pop(),f=a.getAuxiliaryData().alias;if(f){var g=b("MercuryIDs").getParticipantIDFromUserID(e);b("MercuryVanityIDMap.bs").set(f,g)}switch(d){case"game":this.setState({gameID:e});return;case"search":b("qex")._("1097094")&&b("MessengerSearchActions").enterMessageSearch();this._endSearchFunnelStartContentSearchFunnel(c,d);b("MessengerSearchActions").changeQueryAll(c);return;case"message":this._updateToThread(e,a);this._endSearchFunnelStartContentSearchFunnel(c,d);break;default:this._updateToThread(e,a)}b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread("source:messenger:web_search",e)},_updateToThread:function(a,b){var c=this,d=function(a){return c.props.onSelect(a,b.getType(),b)};b.getType()==="thread"||b.getAuxiliaryData().messageResultType==="groupConversation"?j.getClientIDFromServerID(a,d):this._getThreadID(a,d)},_handleHideGame:function(){this.setState({gameID:null})},_handleKeyDown:function(a){var c=a.keyCode;c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").RETURN?this.props.isMessageSearchMode&&c===b("Keys").RETURN?b("MessengerSearchActions").changeQueryAll(this.props.queryString):this._view&&this._view.onKeyDown&&this._view.onKeyDown(c,a):c===b("Keys").BACKSPACE?this.props.onBackspace(a):c===b("Keys").ESC&&(this._input&&this._input.blur())},_handleBlur:function(){var a=this,c=null,d=b("Event").listen(window,"blur",function(){d.remove(),b("clearImmediate")(c)});c=b("setImmediate")(function(){d.remove(),a.props.onBlur()})},_logClearContentSearch:function(){b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){return a&&a.endFunnel(b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_TAGS.END_WITH_X_BUTTON)},"MessengerGraphQLSearchTypeahead.react")},_endSearchFunnelStartContentSearchFunnel:function(a,c,d){var e=this;d===void 0&&(d=!1);!d&&c!=="search"?(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"",c,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel((a=b("MessengerUniversalSearchFunnelLoggerConstants")).END_REASONS.END_ACTION,a.END_ACTIONS.ENTER_INTEGRATED_MESSAGE_SEARCH,null,a.ENTRY_SURFACES.INBOX,a.RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react")):(!d&&c==="search"||d&&c==="message")&&(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"","message",b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel((a=b("MessengerUniversalSearchFunnelLoggerConstants")).END_REASONS.END_ACTION,a.END_ACTIONS.MESSAGE_SEARCH,null,a.ENTRY_SURFACES.INBOX,a.RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"));b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(d){return d.startFunnel(a,c==="search"?b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_ALL_THREADS:b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH)},"MessengerGraphQLSearchTypeahead.react")}});e.exports=c}),null);
__d("MessengerTokenizerToken.react",["cx","Keys","React","SearchableEntry","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=100;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.keyCode===b("Keys").BACKSPACE&&(a.preventDefault(),d.props.onRemove&&d.props.onRemove(d.props.entry))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_14-8"),label:null,onClick:this.$1,onKeyDown:this.$2,role:"option",tabIndex:this.props.index+h},b("React").createElement("span",{"aria-label":this.props.label,title:this.props.label,className:"_14-9"},this.props.label))};d.$1=function(a){a.stopPropagation()};return c}(b("React").Component);c.propTypes={className:a.string,entry:a.instanceOf(b("SearchableEntry")),index:a.number,label:a.string.isRequired,onRemove:a.func};e.exports=c}),null);
__d("MessengerGraphQLTokenizer.react",["cx","invariant","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLSearchTypeahead.react","MessengerSecondarySearchFunnelConstants","MessengerTokenizerToken.react","React","immutable","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!0,d.state={focused:d.props.autoFocus,queryString:""},d.focusInput=function(){d.refs.typeahead&&d.refs.typeahead.focusInput()},d.$4=function(){if(!d.$1)return;d.setState({focused:!1})},d.$8=function(){if(!d.$1)return;d.setState({focused:!0})},d.$5=function(a){if(d.state.queryString||d.props.entries.size===0)return;d.$10(d.props.entries.last());a.preventDefault();b("setImmediate")(d.focusInput)},d.$6=function(a){if(!d.$1)return;a.target instanceof HTMLInputElement||h(0,1185);a=a.target.value;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:a,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:a})},d.$7=function(){if(!d.$1)return;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:null,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""});d.props.onClear&&d.props.onClear()},d.$9=function(a,c,e){__p&&__p();if(!d.$1)return;a=d.props.entries;var f=e.getUniqueID();if(d.props.originalEntryIDs.contains(f))return;else if(a.some(function(a){return a.getUniqueID()===f})){d.$10(e);return}d.props.onAddEntryAttempt(e);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""})},d.$10=function(a){d.props.onRemoveEntryAttempt(a)},d.$3=function(a){d.focusInput()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.props.autoFocus&&b("setImmediate")(this.focusInput)};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this,c=this.props.entries.map(function(b,c){return a.$2(b,c)}),d=c.size>0?"":this.props.placeholder,e=this.props.forceHideClearButton||this.state.queryString===""&&this.props.entries.isEmpty();return b("React").createElement("div",null,b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_14-7")},b("React").createElement("div",{className:b("joinClasses")("_58-2","clearfix"),onClick:this.$3},c,b("React").createElement(b("MessengerGraphQLSearchTypeahead.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,className:"_58-0",context:this.props.context,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,hasHoverState:this.props.hasHoverState,hideClearButton:e,isFacebookChat:!1,isFocused:this.state.focused,isTokenizer:!0,onBlur:this.$4,onBackspace:this.$5,onChange:this.$6,onClear:this.$7,onFocus:this.$8,onSelect:this.$9,originalEntryIDs:this.props.originalEntryIDs,placeholder:d,queryString:this.state.queryString,ref:"typeahead",roomAssociatedObject:this.props.roomAssociatedObject,selectedEntryIDs:b("immutable").Seq(this.props.entries).map(function(a){return a.getUniqueID()}).toSet(),scrollableViewClassName:this.props.scrollableViewClassName,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,tabIndex:this.props.tabIndex,threadFBID:this.props.threadFBID,useLayer:this.props.useLayer,viewer:this.props.viewer,width:this.props.width}))),this.state.queryString===""&&!this.state.focused?this.props.defaultEntries:null)};d.$2=function(a,c){return b("React").createElement(b("MessengerTokenizerToken.react"),{className:"_2ei6",key:a.getUniqueID(),label:a.getTitle(),entry:a,index:c,onRemove:this.$10})};return c}(b("React").PureComponent);c.propTypes={autoFocus:a.bool.isRequired,canViewerSendMoneyFilter:a.bool,includeExistingParticipantIDs:a.bool,className:a.string.isRequired,context:a.object,defaultEntries:a.element,enableMessageSearch:a.bool.isRequired,entries:a.instanceOf(b("immutable").List).isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,forGroup:a.bool,forceHideClearButton:a.bool,hasHoverState:a.bool.isRequired,customResultFilterFn:a.func,onAddEntryAttempt:a.func.isRequired,onClear:a.func,onRemoveEntryAttempt:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,placeholder:a.node.isRequired,roomAssociatedObject:a.object,scrollableViewClassName:a.string.isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,tabIndex:a.number,threadFBID:a.string,useLayer:a.bool.isRequired,viewer:a.string.isRequired,width:a.number.isRequired};e.exports=c}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_PANEL:"chat_panel",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_ADD_MEMBERS_DIALOG:"group_call_add_members_dialog",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"group_call_participant_picker_dialog",CALL_CONTAINER:"call_container",TIMELINE_TOP_SECTION:"timeline_top_section",DROPDOWN_CALL_MENU:"dropdown_call_menu",THREAD_LIST:"thread_list",DESKTOP_NOTIFICATION:"desktop_notification",AUDIO_FALLBACK_DIALOG:"audio_fallback_dialog",STAR_RATING_SURFACE:"star_rating_surface",MISSED_CALL_DIALOG:"missed_call_dialog",UNSUPPORTED_BROWSER_DIALOG:"unsupported_browser_dialog",ADMIN_MESSAGE:"admin_message",WORK_HOVERCARD:"work_hovercard",MESSENGER_BUBBLE:"messenger_bubble",CHAT_SIDEBAR:"chat_sidebar",SETTING_DIALOG:"setting_dialog",SCREENSHARING_POP_OUT:"screensharing_pop_out",MWEB_ROSTER_VIEW:"mweb_roster_view"})}),null);