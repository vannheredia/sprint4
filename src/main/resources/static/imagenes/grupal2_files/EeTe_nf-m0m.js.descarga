if (self.CavalryLogger) { CavalryLogger.start_js(["QA8Lu"]); }

__d("StoriesPollStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"VoteStoryCardPollData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"vote_story_card_poll",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VoteStoryCardPollResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"story_card_poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"index",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"StoriesPollStickerMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"StoriesPollStickerMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"StoriesPollStickerMutation",id:"2241322555930366",text:null,metadata:{}}}}();e.exports=a}),null);
__d("StoriesPollSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_overlay",type:"StoryOverlayPollSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"voting_control_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]},{kind:"LinkedField",alias:null,name:"poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]}]}]};e.exports=a}),null);
__d("StoriesPollSticker_owner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_owner",type:"CameraPostBucketOwnerUnion",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]};e.exports=a}),null);
__d("StoriesPollSticker_story.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesPollSticker_story",type:"Story",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"via",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("StoriesReactionStickerMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"ReactStoryCardReactionStickerData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"react_story_card_reaction_sticker",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ReactStoryCardReactionStickerResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"story_card_reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"StoriesReactionStickerMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"StoriesReactionStickerMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"StoriesReactionStickerMutation",id:"2107432889344441",text:null,metadata:{}}}}();e.exports=a}),null);
__d("StoriesReactionSticker_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesReactionSticker_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardOverlayPositioner_bounds",args:null}]},{kind:"FragmentSpread",name:"ReactionStickerKeyframe_overlay",args:null}]};e.exports=a}),null);
__d("ReactionStickerKeyframe_overlay.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null};return{kind:"Fragment",name:"ReactionStickerKeyframe_overlay",type:"StoryOverlayReactionSticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"reaction_sticker",storageKey:null,args:null,concreteType:"StoryCardReactionSticker",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_asset",storageKey:null,args:null,concreteType:"InspirationsStickerImageAsset",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"sticker_animation_assets",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAssetWithType",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"type",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"asset",storageKey:null,args:null,concreteType:"InspirationsStickerAnimationAsset",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"keyframe_uri",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"initial_state_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[a,b,c,d]}]}]}]}]},{kind:"LinkedField",alias:null,name:"bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[d,a,b,c]}]}}();e.exports=a}),null);
__d("StoriesPollStickerOptionLabel.react",["cx","Autosize.react","React","StoriesEnums","range","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("StoriesEnums").POLL_STICKER;function a(a){__p&&__p();var c=a.overlayHeight,d=a.overlayWidth,e=a.voteCountPercent,f=e!==void 0&&e!==null,g=.5;typeof e==="number"&&(g=e/100);e=function(){var b=a.overlayWidth*h.AVAILABLE_WIDTH_RATIO;b=Math.floor(b*g*h.VOTE_OPTION_MAX_WIDTH_RATIO);var d=Math.floor(f?h.TEXT_SMALL_HEIGHT_RATIO*c:h.TEXT_BIG_HEIGHT_RATIO*c);return{height:d,width:b}};var i=function(){var b={color:a.isSelected&&a.isOverflowedOption?h.TEXT_COLOR_GREY:h.BACKGROUND_COLOR_BLUE,height:"auto",width:l},c=f?{lineHeight:1}:{};return babelHelpers["extends"]({},b,c)};e=e();var j=h.VOTE_OPTION_MAX_WIDTH_RATIO*100,k="t2y4k39h oqcyycmt po0baly6 aenfhxwr taijpn5t cbu4d94t m1ybzrwu j83agx80 rq0escxv"+(a.isSelected?" igj13h7g":""),l=a.isOverflowLayout?h.DEFAULT_OPTION_WIDTH_RATIO*d*h.VOTE_OPTION_MAX_WIDTH_RATIO:e.width,m={};i=i();a.isOverflowLayout?(m.maxWidth=l,i.width="auto"):m.maxWidth=j+"%";j=f&&g<=.5?1:0;j={color:h.TEXT_COLOR_GREY,fontSize:d*h.VOTE_COUNT_FONT_SIZE_RATIO,width:i.width,zIndex:j};var n=f?h.TEXT_SMALL_MIN_FONT_SIZE_RATIO*d:h.TEXT_BIG_MIN_FONT_SIZE_RATIO*d;d=f?h.TEXT_SMALL_MAX_FONT_SIZE_RATIO*d:h.TEXT_BIG_MAX_FONT_SIZE_RATIO*d;a.isSelected&&a.isOverflowedOption?i=babelHelpers["extends"]({},i,{color:h.TEXT_COLOR_GREY}):a.isSelected&&a.isResultView&&(j.color="white",i=babelHelpers["extends"]({},i,{color:"white"}));a.isInstagramStyle&&(j.color=h.TEXT_COLOR_GREY,i.color=a.isLeftOption?h.IG_LEFT_TEXT_COLOR:h.IG_RIGHT_TEXT_COLOR);return b("React").createElement("div",{className:k,style:m},b("React").createElement("div",{className:"_66l8",style:babelHelpers["extends"]({},i,{textAlign:a.align})},b("React").createElement(b("Autosize.react"),{height:e.height,sizes:b("range")(n,d+1,2),width:l},a.text.toUpperCase())),f&&b("React").createElement("div",{className:"_66l8",style:babelHelpers["extends"]({},j,{textAlign:a.align})},(a.voteCountPercent||0)+"%"))}e.exports=a}),null);
__d("StoriesPollStickerOption.react",["CometUnstyledButton.react","React","ReactMotion","StoriesEnums","StoriesPollStickerOptionLabel.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("ReactMotion").Motion,i=b("ReactMotion").presets,j=b("ReactMotion").spring,k=b("StoriesEnums").POLL_STICKER,l=b("StoriesEnums").VOTING_PHASES;function a(a){__p&&__p();var c=a.width,d=a.overlayHeight,e=a.overlayWidth,f=a.isLeftOption,n=m(a);if(a.votingPhase===l.VOTING)return b("React").createElement("div",{className:"k4urcfbm abiwlrkh oqq733wu a8nywdso qt6c0cv9 rz4wbd8a jb3vyjys n5yhfkqm taijpn5t datstx6m j83agx80 nhd2j8a9 mkbloq8g bp9cbjyn"+(f?" h3mn19vb":"")+" hdj6kjfu mo3u6lec",style:babelHelpers["extends"]({},n,{width:k.DEFAULT_OPTION_WIDTH_RATIO*c})},b("React").createElement(b("CometUnstyledButton.react"),{onClick:a.onSelect},b("React").createElement(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent})));if(a.votingPhase===l.RESULTS)return b("React").createElement("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},f?{"border-end-1":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-1":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected&&a.isConsumer?{"background-color-1":"j0apdczp"}:null,a.isSelected&&!a.isConsumer?{"background-image-1":"ceizbtlg"}:null),style:babelHelpers["extends"]({},n,{width:c})},b("React").createElement(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!a.isConsumer,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent}));var o=f&&a.isSelected||!f&&!a.isSelected;o=o?0:e;c=f?c:Math.abs(c-e);o=Math.floor(f?o:Math.abs(e-o));c=Math.floor(f?c:Math.abs(e-c));return b("React").createElement(h,{defaultStyle:{width:o},style:{width:j(c,babelHelpers["extends"]({},i.noWobble))}},function(c){return b("React").createElement("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","background-color-1":"mkbloq8g","cursor-1":"nhd2j8a9","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","min-width-1":"n5yhfkqm","padding-top-1":"jb3vyjys","padding-end-1":"rz4wbd8a","padding-bottom-1":"qt6c0cv9","padding-start-1":"a8nywdso","pointer-events-1":"oqq733wu","user-select-1":"abiwlrkh","width-1":"k4urcfbm"},f?{"border-end-1":"h3mn19vb"}:null,{"align-items-1":"bp9cbjyn","border-end-1":"bn081pho","cursor-1":"bnpdmtie","display-1":"j83agx80","flex-direction-1":"cbu4d94t","justify-content-1":"taijpn5t","pointer-events-1":"hzruof5a"},a.isSelected?{"background-color-1":"j0apdczp"}:null),style:babelHelpers["extends"]({},c,n)},b("React").createElement(b("StoriesPollStickerOptionLabel.react"),{align:n.textAlign,isInstagramStyle:a.isInstagramStyle,isLeftOption:a.isLeftOption,isOverflowLayout:a.isOverflowLayout,isOverflowedOption:a.isOverflowedOption,isResultView:!1,isSelected:a.isSelected,overlayHeight:d,overlayWidth:e,text:a.text||"",voteCountPercent:a.voteCountPercent}))})}var m=function(a){__p&&__p();var b={textAlign:"center"};a.isSelected&&a.votingPhase===l.RESULTS&&a.isInstagramStyle&&(b=babelHelpers["extends"]({},b,{background:k.BACOGROUND_COLOR_SLATE}));if(a.optionsCount===1)return babelHelpers["extends"]({},b,{borderEnd:"0px"});var c=a.isLeftOption?"Left":"Right",d=a.isLeftOption?"left":"right",e=a.isLeftOption?"flex-start":"flex-end";c="padding"+c;if(a.isOverflowLayout){b=babelHelpers["extends"]({},b,(e={alignItems:e},e[c]=k.OVERFLOW_CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}else if(!a.isInstagramStyle){b=babelHelpers["extends"]({},b,(e={},e[c]=k.CHILD_PADDING_RATIO*a.overlayWidth+"px",e))}a.isOverflowedOption&&(b.textAlign=d);return b};e.exports=a}),null);
__d("StoriesPollSticker.react",["React","StoriesActorContext","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesPollStickerOption.react","StoriesRelay","stylex","uuid","StoriesPollStickerMutation.graphql","StoriesPollSticker_overlay.graphql","StoriesPollSticker_owner.graphql","StoriesPollSticker_story.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useState,j=b("StoriesEnums").POLL_STICKER,k=b("StoriesEnums").VOTING_PHASES,l=(c=b("StoriesRelay")).commitMutation;d=c.createFragmentContainer;c.graphql;var m=c.useRelayEnvironment;function a(a){__p&&__p();var c,d=m(),e=i(!1),f=e[0],l=e[1];e=h(b("StoriesActorContext"));var q=e.actorID;e=a.containerHeight;var s=a.containerWidth,t=a.overlay,u=t==null?void 0:t.poll,v=t==null?void 0:t.style,w=v===j.IG_TWO_OPTION_COMBINED;v=t==null?void 0:(v=t.voting_control_bounds)==null?void 0:v.width;c=t==null?void 0:(c=t.voting_control_bounds)==null?void 0:c.height;if(typeof v!=="number"||typeof c!=="number")return null;var x=v*s,y=c*e,z=function(b){var c=u==null?void 0:u.can_viewer_vote;if(c===!1)return;l(!0);c={optionIndex:b,storyID:a.cardID};r(c,d,a)},A=function(){__p&&__p();var b=(u==null?void 0:u.poll_options)||[],c=u==null?void 0:u.viewer_vote_index,d=u==null?void 0:u.can_viewer_vote,e=b.reduce(function(a,b){return a+(b.vote_count||0)},0),g=o(b),h=c!=null&&c>=0,i=!n(a,q);d=i?!h&&d:e===0;var j=!f&&!d,l=f&&!d,m=0,r=[],s=p(a);b.forEach(function(a,d){__p&&__p();var n=a.text;a=a.vote_count;var o=d===c||s;if(typeof a!=="number")return;if((j||l)&&a===0)return;var p=void 0;v=x;var q=k.VOTING,t=!1;if(j||l){j?q=k.RESULTS:l&&(q=k.JUST_VOTED);var u=!i&&!h&&g===d;t=o||u;if(d===b.length-1)p=100-m;else{o=a/e;p=o*100;u=Math.round(p)!==p;a=p<.1;o=u?p.toFixed(a?1:0):p;p=parseFloat(o);m+=p}v=x*(p/100)}r.push({animateIn:f,isConsumer:i,isSelected:t,key:d,onSelect:function(){return z(d)},text:n,voteCountPercent:p,votingPhase:q,width:v})});return r};c=function(){a.setPause(!0,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)};var B=function(){a.setPause(!1,b("StoriesPauseReasons").MOUSE_ENTER_POLL_STICKER)},C=function(){var a=A(),c=a.findIndex(function(a){return a.width<=j.MINIMUM_LABEL_WIDTH_RATIO*x});return a.map(function(d,e){return b("React").createElement(b("StoriesPollStickerOption.react"),babelHelpers["extends"]({},d,{isInstagramStyle:w,isLeftOption:e===0,isOverflowLayout:c>=0,isOverflowedOption:c===e,optionsCount:a.length,overlayHeight:y,overlayWidth:x}))})};C=C();return b("React").createElement(b("StoriesCardOverlayPositioner.react"),{bounds:t==null?void 0:t.voting_control_bounds,containerHeight:e,containerWidth:s},b("React").createElement("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"gs1a9yip","background-color-1":"mkbloq8g","border-0.1":"e4t7hp5w","bottom-1":"i09qtzwb","box-shadow-1":"nwm2mul6","color-1":"h4pr0btg","display-1":"j83agx80","flex-direction-1":"btwxx1t3","height-1":"datstx6m","justify-content-1":"jifvfom9","overflow-x-1":"ni8dbmo4","overflow-y-1":"stjgntxs","pointer-events-1":"oqq733wu","position-1":"pmk7jnqg","top-1":"kr520xx4","transform-origin-1":"dd2scrzq","width-1":"k4urcfbm"},w?null:{"border-radius-1":"ftxzald5"},w?{"border-radius-1":"ltc6uupt"}:null),onMouseEnter:c,onMouseLeave:B},C))}var n=function(a,b){var c=a.owner;if(c==null)return!1;b=b;a=(a=a.story)==null?void 0:(a=a.via)==null?void 0:a.id;return c.id===b||a===b},o=function(a){return a.reduce(function(b,c,d){c=c==null?void 0:c.vote_count;var e=a[b].vote_count;return typeof c==="number"&&typeof e==="number"&&e<c?d:b},0)},p=function(a){a=((a=a.overlay)==null?void 0:(a=a.poll)==null?void 0:a.poll_options)||[];return a.filter(function(a){a=a==null?void 0:a.vote_count;return typeof a==="number"&&a>0}).length===1},q=function(a,c){__p&&__p();var d=a.get(c.storyID);d=d&&d.getLinkedRecords("story_overlays")||[];var e=null;d.map(function(a){if(a==null)return;a.getValue("__typename")==="StoryOverlayPollSticker"&&(e=a.getLinkedRecord("poll"))});if(e==null)return;d=c.optionIndex;e.setValue(d,"viewer_vote_index");c=e.getLinkedRecords("poll_options");var f=c.length,g=new Array(f);g[f-d-1]=c[f-d-1];g[d]=a.create("client:newNode:"+b("uuid")(),"StoryCardPollOption");g[d].setValue(c[d].getValue("vote_count")+1,"vote_count");g[d].setValue(c[d].getValue("text"),"text");e.setLinkedRecords(g,"poll_options")},r=function(a,b,c){c=(c=c.overlay)==null?void 0:(c=c.poll)==null?void 0:c.id;if(c===null)return;l(b,{mutation:s,optimisticUpdater:function(b){return q(b,a)},variables:{input:{option:a.optionIndex,story_card_poll_id:c}}})},s=function(){return b("StoriesPollStickerMutation.graphql")};e.exports=d(a,{overlay:function(){return b("StoriesPollSticker_overlay.graphql")},owner:function(){return b("StoriesPollSticker_owner.graphql")},story:function(){return b("StoriesPollSticker_story.graphql")}})}),null);
__d("ReactionStickerKeyframe.react",["Keyframes.react","React","StoriesRelay","emptyFunction","stylex","ReactionStickerKeyframe_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;function a(a){__p&&__p();var c,d,e=function(g){__p&&__p();var h,l={height:0,key:"",keyframe_uri:"",onRepeatEnd:b("emptyFunction"),repeatCount:1,type:"AFFORDANCE",width:0,x:0,y:0};h=(h=a.overlay)==null?void 0:(h=h.reaction_sticker)==null?void 0:(h=h.sticker_asset)==null?void 0:h.sticker_animation_assets;if(!h)return null;h=(h=h.find(function(a){return g===a.type}))==null?void 0:h.asset;if(!h)return null;h=h;var f=h.keyframe_uri;h=h.initial_state_bounds;if(!h)return null;var c=h.height,d=h.width,e=h.x;h=h.y;if(typeof d!=="number"||typeof c!=="number"||typeof e!=="number"||typeof h!=="number"||typeof f!=="string")return null;l.width=d;l.height=c;l.x=e;l.y=h;l.keyframe_uri=f;l.key=a.uniqueKey;l.type=a.type;g==="TAP"&&(l.repeatCount=1,l.onRepeatEnd=function(){a.tapOnReaptEnd(a.uniqueKey)});g==="AFFORDANCE"&&(l.repeatCount=Infinity,l.onRepeatEnd=b("emptyFunction"));return l};e=e(a.type);if(!e)return null;var f=e.key,g=e.onRepeatEnd,h=e.repeatCount,i=e.height,j=e.width,k=e.x,l=e.y,m=e.keyframe_uri,n=a.containerHeight,o=a.containerWidth,p=a.overlay;c=p==null?void 0:(c=p.bounds)==null?void 0:c.width;d=p==null?void 0:(d=p.bounds)==null?void 0:d.height;if(p==null||typeof c!=="number"||typeof d!=="number")return null;p=c*o;var q=d*n;n=n*d/q;d=o*c/p;o=q/i;c=p/j;q={left:"-"+k*c+"px",position:"absolute",top:"-"+l*o+"px",transform:"scaleY("+n+") scaleX("+d+")"};return b("React").createElement(b("Keyframes.react"),{assetName:"reaction_sticker",className:e.type==="TAP"?"pmk7jnqg hzruof5a":"",height:o,key:f,onRepeatEnd:g,projectName:"facebook_stories",repeatCount:h,source:m,style:q,width:c})}e.exports=c(a,{overlay:function(){return b("ReactionStickerKeyframe_overlay.graphql")}})}),null);
__d("StoriesReactionSticker.react",["FBLogger","React","ReactionStickerKeyframe.react","StoriesCardOverlayPositioner.react","StoriesEnums","StoriesPauseReasons","StoriesRelay","StoriesUniqueID","stylex","StoriesReactionStickerMutation.graphql","StoriesReactionSticker_overlay.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useRef,h=b("React").useState,i=b("StoriesEnums").STORY_REACTION_STICKERS_CONSTANTS,j=(c=b("StoriesRelay")).commitMutation;c.graphql;var k=c.useRelayEnvironment;d=c.createFragmentContainer;function l(a,b){var c=Date.now();return function(){c+b-Date.now()<0&&(a(),c=Date.now())}}function a(a){__p&&__p();var c=k(),d=h([{key:"",type:"AFFORDANCE"}]),e=d[0],f=d[1],n=g(null),o=g(null),p=g(0);d=l(function(){a.setPause(!0,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER),p.current+=1,u(),s(),n.current=window.setTimeout(function(){r()},i.HOLD_DELAY)},i.ANIMATIONS_INTERVAL_THROTTLE);var q=function(c){f(function(d){d=d.filter(function(a){return a.key!==c});d.length<2&&a.setPause(!1,b("StoriesPauseReasons").CLICK_ON_OVERLAY_STICKER);return d})},r=function a(){p.current+=1,u(),o.current=window.setTimeout(function(){s(),a()},i.ANIMATIONS_INTERVAL_THROTTLE)},s=function(){f(function(a){return[].concat(a,[{key:b("StoriesUniqueID")(),type:"TAP"}])})},t=function(){window.clearTimeout(n.current),window.clearTimeout(o.current)},u=function(){var d;d=(d=a.overlay)==null?void 0:(d=d.reaction_sticker)==null?void 0:d.id;var e=a.logger;if(d===null)return;j(c,{mutation:m,onCompleted:function(a,b){e.replyAttemptCompletedLog("reaction_sticker_react",b==null?null:b[0])},onError:function(a){e.replyAttemptCompletedLog("reaction_sticker_react",a),b("FBLogger")("fbstories").catching(a).warn("Error interacting reaction stickers. ")},variables:{input:{client_mutation_id:b("StoriesUniqueID")(),count:p.current,story_card_reaction_sticker_id:d}}})},v=a.containerHeight,w=a.containerWidth,x=a.overlay,y=x==null?void 0:x.bounds;return y==null?null:b("React").createElement(b("StoriesCardOverlayPositioner.react"),{bounds:y,containerHeight:v,containerWidth:w},b("React").createElement("div",{className:"k4urcfbm fi2e5rcv pmk7jnqg oqq733wu datstx6m nhd2j8a9",onMouseDown:d,onMouseLeave:t,onMouseUp:t},e.map(function(a,c){return b("React").createElement(b("ReactionStickerKeyframe.react"),{containerHeight:v,containerWidth:w,key:a.key,overlay:x,tapOnReaptEnd:q,type:a.type,uniqueKey:a.key})})))}var m=function(){return b("StoriesReactionStickerMutation.graphql")};e.exports=d(a,{overlay:function(){return b("StoriesReactionSticker_overlay.graphql")}})}),null);
__d("XStoriesAsyncTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/tray/async/",{expanded:{type:"Bool",defaultValue:!1}})}),null);
__d("FBStoriesTrayReloadXHPTray",["AsyncRequest","XStoriesAsyncTrayController"],(function(a,b,c,d,e,f){"use strict";a={reloadTray:function(a){a=b("XStoriesAsyncTrayController").getURIBuilder().setBool("expanded",(a=a)!=null?a:!1).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).send()}};e.exports=a}),null);
__d("StoriesTrayLoggerSessionProvider",["React","StoriesTrayLoggerSessionContext"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.children;a=a.trackingStrings;return b("React").createElement(b("StoriesTrayLoggerSessionContext").Provider,{value:{trackingStrings:a}},c)}e.exports=a}),null);
__d("FBStoriesViewer2",["csx","cx","requireDeferred","Arbiter","ChatSidebarActions","ChatSidebarStore","CometDarkMode","CometStoriesPlaceholder.react","CSS","DOM","DOMQuery","FantaHider","FBLogger","FBStoriesTrayReloadXHPTray","PageTransitions","React","ReactDOM","StoriesEnums","StoriesGating","StoriesLoggingConstants","StoriesTrayLoggerSessionProvider","StoriesViewer2URI","URI","UserAgent","WebStorage","deferredLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("CometDarkMode").toggleDarkModeRootClass,l=b("deferredLoadComponent")(b("requireDeferred")("StoriesViewerRoot.react")),m=b("deferredLoadComponent")(b("requireDeferred")("StoriesViewerSuspenseRoot.react")),n=b("deferredLoadComponent")(b("requireDeferred")("StoriesViewerSingleBucketRoot.react")),o="fb_stories_theater",p=4;a=function(){__p&&__p();a.getInstance=function(){this.$8||(a.$8=new a());return a.$8};a.open=function(b){a.getInstance().open(b)};function a(){__p&&__p();var a=this;this.$6=null;this.$7=null;this.$12=function(c){__p&&__p();if(b("StoriesViewer2URI").isValid(c))return!0;a.$9();a.$7&&a.$7.unsubscribe();var d=a.$6;if(d&&c.getQualifiedURI().toString()===d.getQualifiedURI().toString()){if(c.stripTrailingSlash().getPath()===""){d=(i||(i=b("WebStorage"))).getSessionStorage();c=d!=null?d.getItem("stories_tray_expanded"):"false";b("FBStoriesTrayReloadXHPTray").reloadTray(c=="true")}b("PageTransitions").transitionComplete();return!0}return!1};this.$1=!1;this.$3=b("DOMQuery").scry(document.body,"._li")[0]}var c=a.prototype;c.toggle=function(a,b){a?this.open(b):this.$9()};c.open=function(a){__p&&__p();var c=this,d=a.bucketID,e=a.cardID,f=function d(e){if(b("StoriesViewer2URI").isValid(e)===!1){b("FBLogger")("fbstories").mustfix("Stories Viewer Transition Handler hit with non story viewer URL with uri: "+e.getPath());return!1}b("PageTransitions").removeHandler(d,p);c.$10(a);b("PageTransitions").transitionComplete();return!0};b("PageTransitions").registerHandler(f,p);this.$6=b("PageTransitions").getCurrentURI();b("PageTransitions").go(b("StoriesViewer2URI").getURI(d,e))};c.navigateToEntryPoint=function(){this.$6&&b("StoriesViewer2URI").isValid(this.$6)&&(this.$6=new(j||(j=b("URI")))("/")),this.$6?b("PageTransitions").go(this.$6):(j||(j=b("URI"))).go("/")};c.$11=function(a){__p&&__p();var c=a.bucketID,d=a.cardID,e=a.openSource,f=a.traySessionID,g=a.viewerSessionID,h=a.tilePosition;a=a.trackingString;b("CSS").addClass(this.$3,"_72b0");document.body&&b("CSS").addClass(document.body,"_7d54");var i=b("DOM").create("div",{id:o});b("CSS").setClass(i,"_74r7");var j=b("DOM").create("div");b("DOM").appendContent(j,i);this.$4=j;this.$2=i;var k=b("StoriesGating").getBackgroundStyle();b("CSS").setClass(j,"_74r8");k===b("StoriesEnums").BACKGROUND_STYLE.BLACK86?b("CSS").addClass(j,"black86"):k===b("StoriesEnums").BACKGROUND_STYLE.BLACK90&&b("CSS").addClass(j,"black90");b("UserAgent").isBrowser("Edge")||b("CSS").addClass(j,"_7qac");b("DOM").appendContent(this.$3,j);k=null;e===b("StoriesLoggingConstants").ACTION_SOURCE.FACEBOOK_CHAT_TAB||e===b("StoriesLoggingConstants").ACTION_SOURCE.MESSENGER_DOT_COM||e===b("StoriesLoggingConstants").ACTION_SOURCE.POST_HEADER&&b("StoriesGating").shouldUseSuspenseVersionViewer()||e===b("StoriesLoggingConstants").ACTION_SOURCE.TODAY_IN&&b("StoriesGating").shouldUseSuspenseVersionViewer()?k=n:b("StoriesGating").shouldUseSuspenseVersionViewer()?k=m:k=l;j=c==="";b("ReactDOM").render(b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("CometStoriesPlaceholder.react"),{isNullState:j})},b("React").createElement(b("StoriesTrayLoggerSessionProvider"),{trackingStrings:new Map([[c,a]])},b("React").createElement(k,{bucketID:c,cardID:d||"",fadeIn:!0,openSource:(j=e)!=null?j:b("StoriesLoggingConstants").ACTION_SOURCE.TRAY,traySessionID:f,tilePosition:h,viewerSessionID:g}))),i)};c.openDialogMessenger=function(a){b("Arbiter").inform("jewel/hide");if(this.$1)return;this.$1=!0;this.$11(a)};c.$10=function(a){__p&&__p();var c=this;b("Arbiter").inform("jewel/hide");if(this.$1)return;this.$1=!0;this.$7=b("Arbiter").subscribe("page_transition",function(a,d){a=d.uri;if(b("StoriesViewer2URI").isValid(a))return;if(!c.$1){c.$7&&c.$7.unsubscribe();return}c.$12(a)});this.$11(a);b("FantaHider").hide();b("ChatSidebarStore").isEnabled()?(this.$5=b("ChatSidebarStore").getVisibleType(),b("ChatSidebarActions").disable()):this.$5=null;b("PageTransitions").registerHandler(this.$12)};c.$13=function(){this.$2!=null&&(b("ReactDOM").unmountComponentAtNode(this.$2),this.$2=null),b("CSS").removeClass(this.$3,"_72b0"),document.body&&b("CSS").removeClass(document.body,"_7d54"),this.$4!=null&&(b("DOM").remove(this.$4),this.$4=null)};c.closeDialogMessenger=function(){if(this.$1===!1)return;this.$13();this.$1=!1};c.$9=function(){if(this.$1===!1)return;b("StoriesGating").getViewerTheme()===b("StoriesEnums").VIEWER_THEME.DARK_MODE&&k(!1);b("PageTransitions").removeHandler(this.$12);this.$13();b("FantaHider").unhide();this.$5!=null&&b("ChatSidebarActions").enable(this.$5);this.$1=!1};return a}();e.exports=a}),null);
__d("CustomizeChatGrid.react",["cx","fbt","Grid.react","Keys","React","MessengerThreadTheme.re"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Grid.react").GridItem,j=b("MessengerThreadTheme.re").isGradient;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a){var c=this;return function(d){d.keyCode===b("Keys").RETURN&&(d.preventDefault(),c.props.onSelect(a))}};d.$2=function(a){return h._("Elegir tema {theme type} {theme choice}",[h._param("theme type",j(a)?"gradient":"solid color"),h._param("theme choice",a.accessibility_label)])};d.render=function(){var a=this,c=this.props,d=c.items,e=c.isSelectedAccessor,f=c.renderItem,g=c.onSelect;c=c.cols;return b("React").createElement(b("Grid.react"),{cols:c,className:"_3dz6",alignh:"center"},d.map(function(c,d){var h=e(c);return b("React").createElement(i,{"aria-label":a.$2(c),className:"_3dz9",key:d,onClick:function(){return g(c)},onKeyDown:a.$1(c),role:"button",tabIndex:"0"},b("React").createElement("div",{className:"_3dza"+(h?" _3dzb":"")},f(c,h)))}))};return c}(b("React").Component);e.exports=a}),null);
__d("SpinnerWithTimeout.react",["FDSSpinner.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showSpinner:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$2=!0};d.componentWillUnmount=function(){this.$1&&clearTimeout(this.$1),this.$2=!1};d.$3=function(){this.$2&&this.setState({showSpinner:!0})};d.render=function(){var a=this,c=this.props,d=c.timeout;c=babelHelpers.objectWithoutPropertiesLoose(c,["timeout"]);this.$1||(this.$1=setTimeout(function(){a.$3()},d));d=this.state.showSpinner;return d?b("React").createElement(b("FDSSpinner.react"),c):b("React").createElement("div",null)};return c}(b("React").Component);a.defaultProps={shade:"dark",size:"large"};e.exports=a}),null);
__d("CustomizeChatColorGrid.react",["cx","CustomizeChatColorItem.react","CustomizeChatGrid.react","SpinnerWithTimeout.react","MercuryThreadActions","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadActions").get(),i="196241301102133";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){var b=c.props.threadID;h.changeThreadTheme(b,a.id,"SETTINGS");c.props.onSelect()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.thread;a=a.themes;if(!a||a.length===0||!c)return b("React").createElement("div",{className:"_1s20"},b("React").createElement(b("SpinnerWithTimeout.react"),{timeout:1e3,center:!0}));var d=c.theme_id||i;return b("React").createElement(b("CustomizeChatGrid.react"),{items:a,cols:4,isSelectedAccessor:function(a){return a.id==d},onSelect:this.$1,renderItem:function(a,c){return b("React").createElement(b("CustomizeChatColorItem.react"),{theme:a,isSelected:c})}})};return c}(b("React").Component);e.exports=a}),null);
__d("CustomizeTabs",[],(function(a,b,c,d,e,f){a=Object.freeze({EMOJI:"EMOJI",COLOR:"COLOR"});e.exports={CustomizeTitleEnum:a}}),null);
__d("CustomizeThreadDialogEmojiTabPage.react",["cx","ChatEmojiCategories","ChatEmojiPicker.react","EmojiLikeConstants","React","MercuryThreadActions","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadActions").get();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={emojis:d.getInitialEmojis(),currentCategoryIndex:1},d.$1=!1,d.handleEmojiChange=function(a){h.changeThreadEmoji(d.props.threadID,a,"thread_settings"),d.props.onSelect&&d.props.onSelect()},d.$2=function(){__p&&__p();if(d.$1)return;d.$1=!0;var a=d.state.currentCategoryIndex,c=Math.min(b("ChatEmojiCategories").categories.length,a+2),e=b("ChatEmojiCategories").categories.slice(a,c).reduce(function(a,b){b.emojis&&b.emojis.length>0&&(a=a.concat(b.emojis));return a},[]).filter(function(a){return a&&a.length<=2});d.setState(function(a){d.$1=!1;c===b("ChatEmojiCategories").categories.length&&(d.$2=b("emptyFunction"));return{emojis:a.emojis.concat(e),currentCategoryIndex:c}})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialEmojis=function(){var a=b("ChatEmojiCategories").categories[0].emojis;return[b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI].concat(a).filter(function(a){return a&&a.length<=2})};d.render=function(){var a=this.props.thread;a=a&&a.custom_like_icon?a.custom_like_icon.emoji:String.fromCodePoint.apply(String,b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI);return b("React").createElement("div",{className:"_69n_"},b("React").createElement(b("ChatEmojiPicker.react"),{emojiChoices:this.state.emojis,emojiSize:b("EmojiLikeConstants").size.LARGE,onSelect:this.handleEmojiChange,columns:5,alignh:"center",currentEmoji:a,onScroll:this.$2}))};return c}(b("React").Component);e.exports=a}),null);
__d("CustomizeThreadDialogTabPages.react",["cx","React","XUIPageNavigation.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("XUIPageNavigation.react").Group,i=b("XUIPageNavigation.react").Item;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={activePageKey:c.props.defaultPageKey||c.findPage().key},c.$1=function(a){c.setState({activePageKey:a});return!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.findPage=function(a){var b=this.props.pages.find(function(b){return b.key===a});return b||this.props.pages[0]};d.render=function(){var a;return(a=b("React")).createElement("div",{className:"_1pff"},a.createElement(b("XUIPageNavigation.react"),{defaultActiveTabKey:this.state.activePageKey,onTabClick:this.$1},a.createElement(h,null,this.props.pages.map(function(a){return b("React").createElement(i,{key:a.key,className:"_1pfn"},a.title)}))),a.createElement("div",{className:"_1pfo"},this.findPage(this.state.activePageKey).content))};return c}(b("React").Component);e.exports=a}),null);
__d("CustomizeThreadDialog.react",["fbt","CustomizeChatColorGrid.react","CustomizeTabs","CustomizeThreadDialogEmojiTabPage.react","CustomizeThreadDialogTabPages.react","CustomizeThreadThemeUtil","FDSModal.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("CustomizeTabs").CustomizeTitleEnum,i=b("CustomizeThreadThemeUtil").fetchThemesForChat;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={themes:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=!0;i(function(b){a.$1&&a.setState({themes:b})})};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){if(!this.props.show)return null;var a=this.props.threadID,c=g._("Personaliza tu chat");a=[{key:h.COLOR,title:g._("Color"),content:b("React").createElement(b("CustomizeChatColorGrid.react"),{thread:this.props.thread,threadID:a,onSelect:this.props.onHide,themes:this.state.themes})},{key:h.EMOJI,title:g._("Emoticonos"),content:b("React").createElement(b("CustomizeThreadDialogEmojiTabPage.react"),{thread:this.props.thread,threadID:a,onSelect:this.props.onHide})}];return b("React").createElement(b("FDSModal.react"),{header:b("React").createElement(b("FDSModalHeader.react"),{title:c}),footer:null,isShown:!0,label:"Customize Chat",onHide:this.props.onHide,width:400},b("React").createElement(b("FDSSection.react"),{hasPadding:!1},b("React").createElement(b("CustomizeThreadDialogTabPages.react"),{pages:a,defaultPageKey:this.props.defaultPageKey})))};return c}(b("React").Component);e.exports=a}),null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],(function(a,b,c,d,e,f){a.TypeaheadRenderers||(a.TypeaheadRenderers={}),a.TypeaheadRenderers.compact=b("CompactTypeaheadRenderer")}),3);